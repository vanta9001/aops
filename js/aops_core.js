!function(i){(i.isEpicFailing=function(){return"undefined"==typeof $},i.isEpicFailing())&&(document.getElementById("epicfail").style.display="block")}(window.AoPS||{});
;$((function(){if(jQuery.support.cors=!0,document.getElementById("side-column")&&($("#breadcrumbs-wrapper").addClass("clickable-breadcrumb"),$("#breadcrumbs-wrapper").click((function(){window.innerWidth<840&&($("#side-column-wrapper").toggleClass("active"),$("#submenu-icon").toggleClass("open"))})),$("#side-column .dropdown-box > .title").click((function(e){$(e.currentTarget).parent().toggleClass("open")})),$("#side-column .menu").click((function(e){$("#side-column .submenu-wrapper").removeClass("open"),$(e.currentTarget).find(".submenu-wrapper").addClass("open")}))),$(".infobar").click((function(e){e.target.className.indexOf("infobar-hide")>=0&&($(this).hide(),AoPS.fixFooter(),$("#main-content").trigger($.Event("resize")),$.ajax({url:"/ajax.php",timeout:5e3,type:"post",data:{a:"infobar-hide",key:$(this).data("key")},success:function(e){}}))})),$("#menu-myaops-toggle").click((function(e){$("#menu-myaops").toggle(),e.preventDefault(),e.stopPropagation()})),!document.getElementById("side-column")){var e=document.getElementById("submenu-icon");e&&e.parentNode.removeChild(e)}$(".unimitate-btn").click((function(e){$.ajax({url:"/ajax.php",timeout:5e3,type:"post",data:{a:"unimitate"},success:function(){window.location.reload()}})})),AoPS.fixFooter(),$(window).on("resize.fix_footer",(function(){AoPS.fixFooter()})),AoPS.bootstrap_data&&AoPS.bootstrap_data.platform_user_info&&AoPS.bootstrap_data.platform_user_info.is_restricted&&!AoPS.session.initialized&&AoPS.showRestrictedModal(AoPS.bootstrap_data.platform_user_info),AoPS.bootstrap_data&&AoPS.bootstrap_data.banned_reason&&AoPS.showBannedModal(AoPS.bootstrap_data.banned_reason),AoPS.login.initialize(),AoPS.inputPlaceholders.initialize(),document.createElementNS&&document.createElementNS("http://www.w3.org/2000/svg","svg").createSVGRect?$("html").addClass("svg"):$("html").addClass("no-svg"),$("html").attr("lang","en");var o=$("body"),t=$("#top-bar"),n=$("#main-logo"),i=!1,a=!1,r=!1,s=!1;t.on("mousemove.start_loc",(function(){i=!0})),n.on("mousemove.start_loc",(function(){s=!0})),o.on("mousemove.start_loc",(function(){t.off("mousemove.start_loc"),o.off("mousemove.start_loc"),n.off("mousemove.start_loc"),setTimeout((function(){i=!1,s=!1}),350)})),t.on("mouseenter",(function(){a=!0,setTimeout((function(){!i&&a&&$("#header-popin").animate({opacity:1},150)}),350)})),n.on("mouseenter",(function(){r=!0,setTimeout((function(){!s&&r&&$("#header-popin").animate({opacity:1},150)}),350)})),t.on("mouseleave",(function(){a=!1})),n.on("mouseleave",(function(){r=!1})),$("#header").on("mouseleave",(function(){$("#header-popin").animate({opacity:0},150)})),t.find(".site").hover((function(){var e=$(this);e.addClass("dropdown-visible"),e.find(".site-dropdown-wrapper-b").length&&e.addClass("dropdown-visible-b");var o=e.find(".site-dropdown-wrapper");if(o.length){var t=$(window).width(),n=o.outerWidth(),i=o.offset().left+n+10-t;e.find(".site-dropdown-wrapper-b").length&&(i-=10),i>0&&o.css("left",-100-i+"px")}}),(function(){$(this).removeClass("dropdown-visible").removeClass("dropdown-visible-b").find(".site-dropdown-wrapper").css("left","")})),AoPS.checkPrivacy(),setTimeout((function(){AoPS.showAccountWarningModal()}),500),AoPS.logSecretMessage()})),$(window).on("load",(function(){AoPS.fixFooter()})),AoPS.logSecretMessage=function(){console.log("%c".concat("Oh hey! Fancy meeting you here. If you are reading this, congratulations, you may be on the very first step of your new journey with AoPS. We're building a team of Computer Science educators and are always looking for excellent software engineers. Learn more at https://aops.com/careers."),"\n        font-size: 14px;\n        margin: 0.5em;\n        padding: 1em;\n    ")},AoPS.checkPrivacy=function(){if(document.URL.indexOf("/privacy")<0&&AoPS.session&&AoPS.session.show_privacy){var e=["<p>We've made a few updates to our privacy policy. These updates went into effect on Thursday, August 1, 2024.</p>","<p>Click ",'<a href="'+AoPS.aops_url+'company/privacy" target="_blank">here</a> ',"to learn more about the new ",'<a href="'+AoPS.aops_url+'" target="_blank">artofproblemsolving.com</a> policy.</p>'],o=1,t=document.location.href;(t.indexOf("community")>0||t.indexOf("alcumus")>0||t.indexOf("baeditor")>0||t.indexOf("class/")>0)&&(o=1e3),setTimeout((function(){alert(e.join(""),{onButtonClick:function(){$.post("/ajax.php",{action:"update-accepted"})},max_width:"600px",closeX:!1,force_response:!0})}),o)}},AoPS.showAccountWarningModal=function(){AoPS.bd&&AoPS.bd.showAccountMergeWarning&&AoPS.bd.accountMergeCms&&AoPS.Ui.Modal.showButtonsQuick(AoPS.bd.accountMergeCms,[{text:"Update Email"}],(function(){var e=$("#account-merge-email-input").val();AoPS.Utils.isValidEmail(e)?$.post("/ajax.php",{a:"update-email",email:e},(function(e){if(e&&e.error_msg)$("#account-warning-error").text(e.error_msg).show();else{$("#account-warning-error").html("").hide(),AoPS.Ui.Modal.closeTopModal();AoPS.Ui.Modal.showAlertQuick(["<p>Thank you. Please check your inbox and verify your email to finish completing your email update.</p>"])}})):$("#account-warning-error").text("Please enter a valid email.").show()}),{max_width:"600px",closeX:!1,force_response:!0,close_on_button_click:!1})},window.classicAlert=window.alert,window.alert=function(e,o){AoPS.hasOwnProperty("Ui")?(AoPS.Ui.Modal.closeTopModal(),void 0===o?AoPS.Ui.Modal.showAlertQuick(e):AoPS.Ui.Modal.showAlertQuick(e,o)):window.classicAlert(e)},AoPS.setBreadcrumbs=function(e){for(var o,t=[],n=0;n<e.length;n++)o=e[n].text,e[n].url&&(o='<a href="'+e[n].url+'">'+o+"</a>"),t.push('<span class="crumb crumb-'+(n+1)+'">'+o+"</span>");$(".crumb-wrapper").html(t.join(' <i class="aops-font aops-angle-double-right"></i> '))},AoPS.fixFooter=function(){var e=$(window).height(),o=$("body").hasClass("small-footer");e-=$("#header-wrapper").outerHeight(),e-=$("#top-bar").outerHeight(),$("#breadcrumbs-wrapper:visible").length||(e-=26),e-=o?$("#small-footer-wrapper").outerHeight():$("#main-footer").outerHeight(),$("#main-content").css("min-height",e),o&&$("#small-footer-wrapper").show();var t=document.getElementById("side-column-wrapper");t&&$(t).css("min-height",e),AoPS.fixSidebarOnce()},AoPS.makeSidebarAdjustment=function(e,o,t){if(e&&o&&t){var n=0;o.children().each((function(){n+=$(this).outerHeight(!0)})),e.height()!==Math.max(t.outerHeight(!0),n)&&e.css("height",Math.max(t.outerHeight(!0),n))}},AoPS.fixSidebarOnce=function(){var e=$("#side-column-wrapper"),o=$("#side-column"),t=$("#main-column");AoPS.makeSidebarAdjustment(e,o,t)},AoPS.fixSidebarAnimatedOnce=function(e){AoPS.fixSidebarAnimatedOnceOnElement(e,"main-column")},AoPS.fixSidebarAnimatedOnceOnElement=function(e,o){var t=$("#side-column-wrapper"),n=$("#side-column"),i=2+e?e/15:0,a=0,r=function(){a>i||(a++,AoPS.makeSidebarAdjustment(t,n,$("#"+o)),setTimeout(r,15))};r()},AoPS.fixSidebarClassObserver=function(e){var o,t=$("#side-column-wrapper"),n=$("#side-column"),i=$("#main-column");e||(e=[]),o=e.attributeFilter?{attributeFilter:e.attributeFilter,attributes:!0,childList:!0,subtree:!0}:{attributeFilter:["class"],attributes:!0,childList:!0,subtree:!0};new MutationObserver((function(){if(e.animation_length){var o=2+e.animation_length/15,a=0,r=function(){a>o||(a++,AoPS.makeSidebarAdjustment(t,n,i),setTimeout(r,15))};r()}else AoPS.makeSidebarAdjustment(t,n,i)})).observe(document.getElementById("main-column"),o),e.animation_length?AoPS.fixSidebarAnimatedOnce(e.animation_length/15):AoPS.makeSidebarAdjustment(t,n,i)},AoPS.showRestrictedModal=function(e){var o=e.username,t=e.email,n=encodeURIComponent(window.location.href),i=encodeURIComponent(AoPS.getSigninURL());$("<div />").text("You cannot use this site as ".concat(o||t,". Sign out or switch to a different account to use this site.")).showModalQuick({max_width:"50%",type:"buttons",buttons:[{text:"Sign out",value:"signout"},{text:"Switch accounts",value:"switch"}],closeX:!1,force_response:!0,onButtonClick:function(e){"signout"===e?window.location="/signout?requestedPage=".concat(n):"switch"===e&&(window.location="/signout?requestedPage=".concat(i))}})},AoPS.displayCoppaBlockedModal=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{escapable:!1};AoPS.Ui.Modal.showMessage("The Children's Online Privacy Protection Act (COPPA) requires us to collect parental permission prior to you being able to use your account. Please have your parent fill out and return the <a href='/company/coppa-form' target='_blank'>parental permission form</a>.",{closeX:!!e.escapable,force_response:!e.escapable})},AoPS.showBannedModal=function(e){AoPS.Ui.Modal.showMessage(e,{title:"Account Deactivated",closeX:!1,force_response:!0})},AoPS.getSigninURL=function(){var e=window.location.href;return window.location.pathname.startsWith("/user/activate/")&&(e=window.location.protocol+"//"+window.location.hostname),"/signin?requestedPage=".concat(encodeURIComponent(e))},AoPS.login={ajaxing:!1,logout_url:AoPS.bootstrap_data&&AoPS.bootstrap_data.logout_url,user_clicked_logout:!1,user_clicked_login:!1,modal:null,initialize:function(){$(document).on("click",".online-login-button",AoPS.login.display),$(document).on("click",".online-initialize-button",(function(){AoPS.Initialize.display({escapable:!0})})),$(document).on("click",".online-needs-coppa-button",(function(){AoPS.displayCoppaBlockedModal({escapable:!0})})),$(document).on("click",".online-register-button",AoPS.login.goToRegister),$("#header-logout, #small-header-logout").on("click",AoPS.login.logout),$("#register-button").on("click",(function(e){e.preventDefault(),AoPS.login.register()}))},logout:function(e){window.location.href="/signout?requestedPage=".concat(encodeURIComponent(window.location.href))},register:function(){var e=document.getElementById("login-username").value||"",o=document.getElementById("login-password").value||"";if("function"==typeof(AoPS.Register||{}).display)AoPS.Register.display({username:e,password:o});else{var t=document.getElementById("registration-form");t.username.value=e,t.password.value=o,t.submit()}},goToRegister:function(){"function"==typeof(AoPS.Register||{}).display?AoPS.Register.display({}):window.location.href="/user/register"},loggedin:function(){},display:function(){window.location.href=AoPS.getSigninURL()},onUserAjaxLogout:function(){AoPS.session.logged_in||($("#header .myaops").remove(),$("#header-login").show())},onUserAjaxLogin:function(){document.location.reload(!0)}},$((function(){var e=$(".menubar-label, .login-dropdown"),o=!1;e.on("click",(function(e){o&&(e.preventDefault(),e.stopPropagation())})).on("mouseover",(function(e){if(o)e.preventDefault();else{var t=$(this);t.prop("hoverTimeout")&&t.prop("hoverTimeout",clearTimeout(t.prop("hoverTimeout"))),t.prop("hoverIntent",setTimeout((function(){t.addClass("open")}),50))}})).on("mouseleave",(function(e){if(o)e.preventDefault();else{var t=$(this);t.prop("hoverIntent")&&t.prop("hoverIntent",clearTimeout(t.prop("hoverIntent"))),t.prop("hoverTimeout",setTimeout((function(){t.removeClass("open")}),50))}}));var t=window.navigator.msPointerEnabled?"MSPointerDown":"touchstart";("ontouchstart"in document.documentElement||"MSPointerDown"===t)&&e.each((function(){var n=$(this);this.addEventListener(t,(function(i){if(("MSPointerDown"===t||1===i.touches.length)&&(window.innerWidth>700||n.hasClass("login-dropdown")))if(i.stopPropagation(),n.hasClass("open"))o=!1;else{o=!0,i.target!==this&&i.target.parentNode!==this||i.preventDefault(),e.removeClass("open"),n.addClass("open");var a=function(e){e.stopPropagation(),n.removeClass("open"),document.removeEventListener("touchstart",a),o=!1};document.addEventListener(t,a)}}),!1)}))})),AoPS.updateLayout=function(){},"undefined"!=typeof Backbone&&(AoPS.Model=Backbone.Model.extend({}),AoPS.Collection=Backbone.Collection.extend({debug:function(){console.log(this),console.log(this.length),console.log(this.models)}}),AoPS.View=Backbone.View.extend({getTemplate:function(e,o){var t=AoPS.View.compileTemplate(e);return $.parseHTML($.trim(t&&t(o)))},compile:function(e){return AoPS.View.compileTemplate(e)},display:function(e,o){this.$el.html($.parseHTML($.trim(e(o))))},debug:function(){console.log("View.model:",this.model),console.log("View.tagName:",this.tagName),console.log("View.className:",this.className),console.log("View.el:",this.el),console.log("View.$el:",this.$el)},hide:function(){this.$el.hide()},show:function(){this.$el.show()},close:function(){this.remove(),this.unbind(),"function"==typeof this.onClose&&this.onClose()},showLoadingModal:function(){this.loadingModal=AoPS.Ui.Modal.showMessage('<img src="/assets/images/logo-loader.gif" />',{closeX:!1,force_response:!0,frame_class:"loading-modal-frame"})},closeLoadingModal:function(){AoPS.Ui.Modal.closeParticularModal(this.loadingModal)}}),AoPS.View.template_cache={},AoPS.View.compileTemplate=function(e){var o=AoPS.View.template_cache;if(!o.hasOwnProperty(e)){var t=$(e),n=Handlebars.templates&&Handlebars.templates[e.slice(1)];t.length?o[e]=Handlebars.compile(t.html()):n&&(o[e]=n)}return o[e]}),AoPS.inputPlaceholders={initialize:function(){"placeholder"in document.createElement("input")||($("[placeholder]").focus((function(){var e=$(this);e.val()===e.attr("placeholder")&&(e.val(""),e.removeClass("placeholder"))})).blur((function(){var e=$(this);""!==e.val()&&e.val()!==e.attr("placeholder")||(e.addClass("placeholder"),e.val(e.attr("placeholder")))})).blur(),$(["placeholder"]).parents("form").submit(AoPS.inputPlaceholders.clear),AoPS.inputPlaceholders.clear=function(){$("[placeholder]").each((function(){var e=$(this);e.val()===e.attr("placeholder")&&e.val("")}))})},clear:function(){}},AoPS.doFastMathJax=function(e){AoPS.FastMathJax.push(e)},AoPS.FastMathJax={_elements:[],_isProcessing:!1,_process:function(){if(!this._isProcessing)if(this._elements.length){this._isProcessing=!0;var e=$("<div />").css({position:"fixed",top:"-100vh",left:"-100vw",opacity:0,"z-index":-9999,"pointer-events":"none"}).appendTo($(document.body)),o=this,t=this._elements.splice(0,250);_.each(t,(function(o){o.$hidden=o.$el.clone().removeClass().appendTo(e)})),MathJax.Hub.Queue(["Typeset",MathJax.Hub,e.get(0)]),MathJax.Hub.Queue([function(){_.each(t,(function(e){e.$el.html("").append(e.$hidden.clone()),e.$hidden.remove()})),e.remove(),o._isProcessing=!1,o._process()}])}else this._isProcessing=!1},push:function(e){window.MathJax&&(e instanceof jQuery||_.isArray(e)?_.each(e,_.bind((function(e){this._elements.push({$el:$(e)})}),this)):this._elements.push({$el:$(e)}),setTimeout(_.bind((function(){this._process()}),this),50))}},AoPS.importJavaScript=function(e){var o=document.createElement("script");o.setAttribute("type","text/javascript"),o.setAttribute("src",e),document.getElementsByTagName("head")[0].appendChild(o)},window.number_format=function(e,o,t,n){e=(e+"").replace(/[^0-9+\-Ee.]/g,"");var i,a,r,s=isFinite(+e)?+e:0,l=isFinite(+o)?Math.abs(o):0,c=void 0===n?",":n,u=void 0===t?".":t,d="";return(d=(l?(i=s,a=l,r=Math.pow(10,a),""+(Math.round(i*r)/r).toFixed(a)):""+Math.round(s)).split("."))[0].length>3&&(d[0]=d[0].replace(/\B(?=(?:\d{3})+(?!\d))/g,c)),(d[1]||"").length<l&&(d[1]=d[1]||"",d[1]+=new Array(l-d[1].length+1).join("0")),d.join(u)},function(){var e=!1,o=!1;AoPS.refreshOnBackButtonLoadWithOldData=function(t,n){if(!o&&!AoPS.bd.frozenTime&&(o=!0,t)){var i=function(e){var o=""+AoPS.bootstrap_data[e];return!(o.indexOf(";")>-1)&&(parseInt(o)||!1)}(n=n||"init_time");if(!1!==i){var a=function(e){if(!document||_.isUndefined(document.cookie)||!navigator||!navigator.cookieEnabled)return!1;for(var o,t=new RegExp("^\\s*"+e+"_init_time\\s*=\\s*(.*?)\\s*$"),n=document.cookie.split(";"),i=0;i<n.length;i++)if(o=n[i].match(t))return parseInt(o[1]);return!1}(t);!1!==a&&a>=i?function(){if(!e){e=!0;var o=document.createElement("STYLE"),t=document.createTextNode("body {display: none;}");o.appendChild(t),document.head.appendChild(o),console.log("About to refresh the page due to back button use."),setTimeout((function(){window.location.reload(!0)}),2e3)}}():setTimeout((function(){e||(document.cookie=t+"_init_time="+i+"; path=/")}),3e3)}}}}(),AoPS.isUserLimited=function(){return AoPS.user_is_limited},AoPS.user_is_limited=AoPS.hasOwnProperty("session")&&AoPS.session.hasOwnProperty("role")&&-1!==AoPS.session.role.indexOf("limited_user"),AoPS.isUserNew=function(){return AoPS.user_is_new},AoPS.user_is_new=AoPS.hasOwnProperty("session")&&AoPS.session.hasOwnProperty("role")&&-1!==AoPS.session.role.indexOf("new_user"),AoPS.isUserCoppaBlocked=function(){return AoPS.hasOwnProperty("session")&&AoPS.session.hasOwnProperty("needs_coppa_approval")&&!!AoPS.session.needs_coppa_approval},AoPS.in_academy=AoPS.bootstrap_data&&AoPS.bootstrap_data.hasOwnProperty("in_academy")&&1===parseInt(AoPS.bootstrap_data.in_academy),AoPS.convertSmartQuotes=function(e){return e.replace(/[\u2018\u2019]/g,"'").replace(/[\u201C\u201D]/g,'"').replace(/[\u2013\u2014]/g,"-").replace(/[\u2026]/g,"...")};var gOldOnError=window.onerror;window.onerror=function(e,o,t,n,i){return!!gOldOnError&&gOldOnError(e,o,t)},window.onImageLoad=function(){},window.handlebars=function(e,o){var t="";if(o||(o={}),e instanceof Element)t=e.innerHTML;else if("undefined"!=typeof jQuery&&e instanceof jQuery)t=e.html();else{if("string"!=typeof e)return!1;try{var n=document.querySelector(e);t=null===n?e:n.innerHTML}catch(r){t=e}}if("undefined"!=typeof Handlebars)return Handlebars.compile(t)(o);for(var i in o){var a=new RegExp("{{"+i+"}}","g");t=t.replace(a,o[i])}return t},AoPS.handleLocationHash=function(e){var o=function(e){var o=e.offset().top,t=$("#main-menubar").outerHeight();return Math.min(Math.floor(o-t),Math.max($("html").prop("scrollHeight")-$(window).height(),$("body").prop("scrollHeight")-$(window).height()))},t={};function n(e){if(!t.animating){t.animating=!0;var i=o(e);$("html, body").animate({scrollTop:i},{duration:0,step:function(t,n){n.end=o(e)},always:function(){t.animating=!1,Math.abs($(window).scrollTop()-o(e))>t.threshold&&n(e)}})}}setTimeout((function(){if(location.hash){var e=$(document).find(location.hash);e.length&&n(e)}}),0)},AoPS.handleLocationHash2=function(e,o){o||(o={});var t=function(e){var o=$("#header"),t=$("#main-menubar"),n=t.outerHeight();n=$(window).width()<=700?0:"fixed"===o.css("position")?t.outerHeight():t.outerHeight()+70;var i=e.offset().top;return Math.min(Math.floor(i-n),Math.max($("html").prop("scrollHeight")-$(window).height(),$("body").prop("scrollHeight")-$(window).height()))},n={};function i(e){if(!n.animating){n.animating=!0;var a=t(e);$("html, body").animate({scrollTop:a},{duration:o&&o.duration?o.duration:0,step:function(o,n){n.end=t(e)},always:function(){n.animating=!1,Math.abs($(window).scrollTop()-t(e))>5&&(o.duration=0,i(e))}})}}setTimeout((function(){if(e)e.length&&i(e);else if(location.hash){var o=$(document).find(location.hash);o.length&&i(o)}}),0)},AoPS.Constants={minUsernameLength:3,maxUsernameLength:25,minPasswordLength:8};
;AoPS.hasOwnProperty("Ui")&&AoPS.hasOwnProperty("ui_main_loaded")||(AoPS.Ui=function(e){var t;t=$(window).height(),setInterval((function(){var e=$(window).height();e!=t&&(t=e,$(window).trigger("resize"))}),100),$(window).on("resize",(function(){t=$(window).height()})),e.buildTableRow=function(e){var t=$("<tr/>"),o=(e=_.defaults(e,{is_header:!1})).is_header?"th":"td";return _.each(e.data,(function(e){t.append($.parseHTML("<"+o+">"+e+"</"+o+">"))})),e.is_header&&t.addClass("aops-no-sort"),t},e.buildTable=function(t){var o,s,a=0,i=!1,n=!1;return t=_.defaults(t,{sortable:!1,table_id:"",sort_on_build:!1,table_class:"",sort_col:0,sort_order:"asc",repeating_header:0}),o=$("<table/>",{id:t.table_id,class:t.table_class}),s=$("<tbody/>").appendTo(o),t.hasOwnProperty("footer")&&$("<tfoot/>").prependTo(o).append(e.buildTableRow({data:t.footer,is_header:!0})),t.hasOwnProperty("header")&&$("<thead/>").prependTo(o).append(e.buildTableRow({data:t.header,is_header:!0})),t.hasOwnProperty("rows")&&_.each(t.rows,(function(o){s.append(e.buildTableRow({data:o})),a++,t.repeating_header>0&&a%t.repeating_header==0&&s.append(e.buildTableRow({data:t.header,is_header:!0}))})),t.sortable&&(o.tablesorter(t.sort_on_build?{sortList:t.hasOwnProperty("sortList")?t.sortList:[[t.sort_col,"asc"===t.sort_order?0:1]]}:{}),t.repeating_header>0&&(o.bind("sortStart",(function(){i?(i=!1,n=!0):(i=!0,s.find(".aops-no-sort").remove(),o.trigger("update"))})),o.bind("sortEnd",(function(){n?n=!1:s.find("tr:nth-child("+t.repeating_header+"n)").after(e.buildTableRow({data:t.header,is_header:!0}))})))),o},e.Flyout=function(){var e,t={},o=[],s={width:300,height:150,class:"",time:5e3,animation_time:1e3,close_function:"close",top:null};function a(){if(o.length&&document.body){var e=document.getElementById("flyout");if(!e||!e.parentNode){var t=o.shift();i(t.html,t.opts)}}}function i(o,a){a=$.extend({},s,a),e=a;var i=document.createElement("div");i.id="flyout",i.style.width=a.width+"px";var r=a.height;if("number"==typeof r&&(r+="px"),"string"==typeof r&&(i.style.height=r),i.style.right=-a.width+"px",a.top){var l=a.top;l+=$("#top-bar").height()||0,l+=$("#header-wrapper").height()||0,l+="px",i.style.top=l,i.style.bottom="auto"}i.className=a.class,i.insertAdjacentHTML("beforeend",'<div class="close" onclick="AoPS.Ui.Flyout.'+a.close_function+'()"></div>'+o),document.body.appendChild(i),$("#flyout").animate({right:0},a.animation_time,(function(){!1!==a.time&&(t.timeout=setTimeout((function(){n()}),a.time))}))}function n(){$("#flyout").animate({right:-e.width},e.animation_time,(function(){t.timeout=0;var e=document.getElementById("flyout");e&&(e.parentNode.removeChild(e),a())}))}return t.display=function(e,s){document.body?(t.close(),o=[],i(e,s)):(console.error("E_EARLY_FLYOUT"),t.queue(e,s))},t.queue=function(e,t){o.push({html:e,opts:t}),a()},t.close=function(){if(document.body){t.timeout&&clearTimeout(t.timeout),o=[];var e=document.getElementById("flyout");e&&e.parentNode&&e.parentNode.removeChild(e)}},t.closeWithoutClearingQueue=function(){document.body&&(t.timeout&&clearTimeout(t.timeout),n())},$(a),t}(),$.fn.extend({showUnstyledModal:function(e){var t=_.defaults({$obj:this},arguments.length>0?arguments[0]:{});return this.show(),AoPS.Ui.Modal.show$Object(t)},showPlainModal:function(e){var t=_.defaults({body:this},arguments.length>0?arguments[0]:{});return this.show(),AoPS.Ui.Modal.show(t)},showPlainBodyModal:function(e){var t=_.defaults({body:this},arguments.length>0?arguments[0]:{});return this.show(),AoPS.Ui.Modal.showPlainBody(t)},showModal:function(e){var t=arguments.length>0?arguments[0]:{};return this.show(),AoPS.Ui.Modal.showMessage(this,t)},showModalQuick:function(e){var t=arguments.length>0?arguments[0]:{};return this.show(),AoPS.Ui.Modal.showMessageQuick(this,t)},showPlainAlert:function(e){var t=_.defaults({body:this,type:"alert"},arguments.length>0?arguments[0]:{});return this.show(),AoPS.Ui.Modal.show(t)},showAlertQuick:function(e){var t=arguments.length>0?arguments[0]:{};return this.show(),AoPS.Ui.Modal.showAlertQuick(this,t)},showAlert:function(e){var t=arguments.length>0?arguments[0]:{};return this.show(),AoPS.Ui.Modal.showAlert(this,t)},cloneToPlainModal:function(e){var t=this.clone(!0),o=_.defaults({body:t,type:"message"},arguments.length>0?arguments[0]:{});return t.show(),AoPS.Ui.Modal.showPlain(o)},cloneToUnstyledModal:function(e){var t=this.clone(!0),o=_.defaults({$obj:t},arguments.length>0?arguments[0]:{});return this.show(),AoPS.Ui.Modal.show$Object(o)},cloneToModal:function(e){var t=this.clone(!0),o=_.extend({},arguments.length>0?arguments[0]:{});return t.show(),AoPS.Ui.Modal.showMessage(t,o)},replaceTopModalPlain:function(e){var t=_.defaults({body:this,frame_class:"",type:"message"},arguments.length>0?arguments[0]:{}),o=AoPS.Ui.Modal.replace(t);return this.show(),o},replaceTopModalUnstyled:function(e){var t=_.defaults({$obj:this,type:"$"},arguments.length>0?arguments[0]:{}),o=AoPS.Ui.Modal.replace(t);return this.show(),o},replaceTopModal:function(e){var t=_.extend({type:"message",frame_class:"aops-modal-standard",body:this},arguments.length>0?arguments[0]:{}),o=AoPS.Ui.Modal.replace(t);return this.show(),o}});var o=1e5;return e.Modal={active_modals:[],fitMasks:function(){function e(){var e={height:$(window).outerHeight(),width:$(window).outerWidth()};function t(t,o){var s=t.options["max_"+o];return"%"===s.substr(s.length-1,1)?Math.min(parseFloat(s)/100*e[o],t.options.overall_max_width):Math.min(parseFloat(s),t.options.overall_max_width)}_.each(this.active_modals,(function(e){var o={height:t(e,"height"),width:t(e,"width")};e.$obj.css({"max-height":"","max-width":""}),e.$obj.css({height:e.options.height,width:e.options.width}),_.each(["width","height"],(function(t){var s=Math.round(o[t]);("height"===t?e.$obj.outerHeight():e.$obj.outerWidth())>=s&&e.$obj[t](s)}));var s=Math.min(1e3,window.innerWidth-12)+"px";e.$obj.css({"max-height":e.options.max_height,"max-width":e.options.max_width||s})}))}function t(){$("body").toggleClass("modal-page-overflow",$("body").height()>$(window).height()),_.each(this.active_modals,(function(e){e.$wrapper.css({overflow:"hidden"}),e.$obj.css({position:"absolute"}),e.$obj.css({top:parseInt(Math.max(0,($(window).height()-e.$obj.outerHeight())/2*.8)),left:parseInt(Math.max(0,($(window).width()-e.$obj.outerWidth())/2))})}))}e.apply(this),e.apply(this),setTimeout(_.bind((function(){e.apply(this),t.apply(this)}),this),5),t.apply(this)},show$Object:function(e){var t={$wrapper:$("<div/>",{class:"aops-modal-wrapper"}),$mask:$("<div/>",{class:"aops-modal-mask"}),$obj:e.$obj,options:this.appendDefaults(e)};return $("body").addClass("aops-modal-open"),t.$wrapper.append(t.$obj),this.setZIndices(t),$("body").append(t.$mask),$("body").append(t.$wrapper),t.options.hasOwnProperty("onShow")&&setTimeout((function(){t.options.onShow()}),100),this.active_modals.push(t),this.setZIndices(t),t.$mask.fadeTo(e.mask_fade_in_speed,t.options.mask_alpha),t.$wrapper.fadeIn(e.mask_fade_in_speed,(function(){"alert"===e.type&&e.focus_on_alert&&t.$obj.find("button").first().focus()})),t.options.draggable&&t.$obj.draggable&&t.$obj.draggable(t.options.draggable_options),this.parseForceResponse(t),this.fitMasks(),!("activeElement"in document)||_.isUndefined(document.activeElement)||_.isNull(document.activeElement)||document.activeElement.blur(),t.options.mathjax&&window.MathJax&&MathJax.Hub.Queue(["Typeset",MathJax.Hub,t.$obj[0]]),t.$obj.trigger("modal_shown"),_.each(t.$wrapper.find(".attach-modal-to-dom"),(function(e){e.modalObject=t,$(e).removeClass("attach-modal-to-dom")})),t},show:function(e){var t;switch((t=this.prepareOptions.apply(this,arguments)).type){case"$":return this.show$Object(t);case"unframed_html":return $($.parseHTML(t.body));case"ignore-loading":break;default:return this.show$Object(_.extend({$obj:this.makeFramed$Object(t)},t))}},extFrameClass:function(e,t){return e+(t.hasOwnProperty("frame_class")?" "+t.frame_class:"")},showPlain:function(e){return this.show(e)},showQuick:function(e){return this.show(_.defaults({frame_class:this.extFrameClass("aops-modal-standard aops-modal-quick",e)},e))},showPlainBody:function(e){return this.show(_.defaults({frame_class:this.extFrameClass("aops-modal-plain-body",e)},e))},showMessage:function(e){var t,o=arguments.length>1?arguments[1]:{};return t=o.hasOwnProperty("buttons")?"buttons":"message",this.show(_.extend({type:t,body:e,frame_class:this.extFrameClass("aops-modal-standard",o)},o))},showMessageQuick:function(e){return this.showQuick(_.extend({type:"message",body:e},arguments.length>1?arguments[1]:{}))},showAlert:function(e){var t=arguments.length>1?arguments[1]:{};return this.show(_.extend({type:"alert",body:e,frame_class:this.extFrameClass("aops-modal-standard",t)},t))},showAlertQuick:function(e){return this.showQuick(_.extend({type:"alert",body:e},arguments.length>1?arguments[1]:{}))},showConfirm:function(e,t){var o=arguments.length>2?arguments[2]:{},s=this.show(_.extend({type:"confirm",body:e,onButtonClick:t,frame_class:this.extFrameClass("aops-modal-standard",o)},o));return s.$obj.find(".aops-modal-btn").first().focus(),s},showConfirmQuick:function(e,t){var o=this.showQuick(_.extend({type:"confirm",body:e,onButtonClick:t},arguments.length>2?arguments[2]:{}));return o.$obj.find(".aops-modal-btn").first().focus(),o},showButtons:function(e,t,o){var s=arguments.length>3?arguments[3]:{};return this.show(_.extend({type:"buttons",buttons:t,body:e,onButtonClick:o,frame_class:this.extFrameClass("aops-modal-standard",s)},s))},showButtonsQuick:function(e,t,o,s){return s=s||{},this.showQuick(_.extend({type:"buttons",buttons:t,body:e,onButtonClick:o},s))},makeFramed$Object:function(e){var t,o,s=null,a=null,i=this,n=$("<div/>",{class:e.scrollable?"aops-scroll-content":"aops-modal-noscroll"});function r(e){var t="";e.removeDefaultBtnCss||(t=" btn-primary"),e.btnClass&&(t=" "+e.btnClass);var o=$("<button/>",{class:"attach-modal-to-dom aops-modal-btn btn"+t,text:e.text}).on("click",(function(t){return e.options.hasOwnProperty("onButtonClick")&&e.hasOwnProperty("value")&&e.options.onButtonClick(e.value),e.options.close_on_button_click&&((o[0]||{}).modalObject?i.closeParticularModal(o[0].modalObject):i.closeTopModal()),t.stopPropagation(),t.preventDefault(),!1}));return o}if(t=$($.parseHTML('<div class="aops-modal-frame"></div>')),o=$($.parseHTML('<div class="aops-modal-content-wrapper"></div>')),t.append(o),e.scrollable?(o.append($.parseHTML('<div class="aops-scroll-outer">\t\t\t\t\t\t<div class="aops-scroll-bar"><div class="aops-scroll-slider"></div></div>\t\t\t\t\t\t<div class="aops-scroll-inner"></div></div>')),n.addClass("aops-scroll-content"),o.find(".aops-scroll-inner").append(n),o.find(".aops-scroll-bar").buildAopsScrollbar({$content:n,axis:e.scroll_axis,chrome53_hack:navigator.userAgent.indexOf("Mac OS X")&&!!window.chrome&&!!window.chrome.webstore}),"y"===e.scroll_axis?t.addClass("aops-modal-vert-scroll"):t.addClass("aops-modal-horiz-scroll")):o.append(n),e.hasOwnProperty("title")&&(a=$("<div/>",{class:"aops-modal-title",html:e.title}),o.prepend(a)),e.hasOwnProperty("body")&&n.append($("<div/>",{class:"aops-modal-body"}).append(e.body)),["alert","confirm","buttons"].indexOf(e.type)>-1)switch(e.aboveButtonText&&$("<div/>",{class:"aops-modal-footer",text:e.aboveButtonText}).appendTo(o),s=$("<div/>",{class:"aops-modal-buttons aops-modal-footer"}).appendTo(o),e.type){case"alert":s.append(r.apply(this,[{text:e.alert_button_ok,value:!0,options:e}]));break;case"confirm":s.append(r.apply(this,[{text:e.confirm_button_ok,value:!0,btnClass:!1,options:e}])),s.append(r.apply(this,[{text:e.confirm_button_cancel,value:!1,btnClass:!1,options:e}]));break;case"buttons":_.each(e.buttons,(function(t){s.append(r.apply(i,[{text:t.text,value:t.value,btnClass:t.btnClass||!1,options:e}]))}))}else e.hasOwnProperty("footer")&&$("<div/>",{class:"aops-modal-footer",html:e.footer}).appendTo(o);if(e.closeX)var l=$("<a />",{class:"attach-modal-to-dom aops-close-x clickable"}).appendTo(o).on("click",(function(){e.onClickX()&&((l[0]||{}).modalObject?i.closeParticularModal(l[0].modalObject):i.closeTopModal())}));return e.hasOwnProperty("frame_class")&&t.addClass(e.frame_class),_.isNull(a)?t.find(".aops-modal-footer").length>0&&t.addClass("bottom-only"):t.addClass(t.find(".aops-modal-footer").length>0?"top-and-bottom":"top-only"),t.css({"max-height":e.max_height,"max-width":e.max_width,height:e.height,width:e.width}),t},setZIndices:function(e){e.$mask.css({"z-index":o++}),e.$wrapper.css({"z-index":o++})},prepareOptions:function(e){var t;return"string"==typeof e?(console.error("E_MODAL",new Error("Calling preloaded modal."),{id:e}),{type:"ignore-loading"}):(t=e,this.appendDefaults(t))},appendDefaults:function(e){return e.hasOwnProperty("defaults_parsed")&&e.defaults_parsed?e:_.extend({defaults_parsed:!0,focus_on_alert:!0,max_width:"80%",max_height:"80%",width:"",height:"",frame_class:"",mask_alpha:.4,kill_phrase:"",mask_fade_in_speed:200,overall_max_width:1e3,force_response:!1,mathjax:!1,closeX:!0,draggable:!1,draggable_options:{},scrollable:!1,scroll_axis:"y",close_on_button_click:!0,alert_button_ok:"OK",confirm_button_ok:"OK",confirm_button_cancel:"Cancel",virtual:!1,onClickMask:function(){return!0},onClickX:function(){return!0}},e)},parseForceResponse:function(e){e.$wrapper.off("click.wrapper"),e.options.force_response?e.$obj.off("click.modal"):(e.$obj.data("clicked_modal",!1),e.$obj.on("click.modal",(function(){e.$obj.data("clicked_modal",!0)})),e.$wrapper.on("click.wrapper",_.bind((function(t){e.$obj.data("clicked_modal")?e.$obj.data("clicked_modal",!1):(e.$obj.data("clicked_modal",!1),e.options.onClickMask()&&(this.closeParticularModal(e),e.$obj.off("click.modal")))}),this)))},closeTopModal:function(){var e;if(0!==this.active_modals.length){if((e=this.active_modals.pop()).options.hasOwnProperty("replace_with"))return this.active_modals.push(e),void this.replaceTopModal(e.options.replace_with);this.removeModal(e),0===this.active_modals.length&&($("body").removeClass("aops-modal-open"),$("body").removeClass("modal-page-overflow"))}},applyKillPhrase:function(e){var t;for(t=this.active_modals.length-1;t>=0;t--)this.active_modals[t].options.kill_phrase===e&&this.closeParticularModal(this.active_modals[t])},closeParticularModal:function(e){this.active_modals=_.without(this.active_modals,e),this.removeModal(e),0===this.active_modals.length&&($("body").removeClass("aops-modal-open"),$("body").removeClass("modal-page-overflow"))},isModalVisible:function(){return!(0===this.active_modals.length)},appendClassToInput:function(e,t,o){var s,a=1;return"string"!=typeof t?(s=t,a=0):s=2===o.length?o[1]:{},s.frame_class=this.extFrameClass(e,s),o[a]=s,o},replaceTopModal:function(e){var t;return(t=this.appendClassToInput("aops-modal-standard",e,arguments))[0]=_.extend({mask_fade_in_speed:0},t[0]),this.replace.apply(this,t)},replaceTopModalQuick:function(e){var t=this.appendClassToInput("aops-modal-standard aops-modal-quick",e,arguments);t[0]=_.extend({mask_fade_in_speed:0},t[0]),this.replace.apply(this,t)},replaceOrShow:function(e){return this.active_modals.length>0?this.replaceTopModal(e):this.show(e)},replaceOrShowQuick:function(e){return this.active_modals.length>0?this.replaceTopModalQuick(e):this.showQuick(e)},replaceTopModalPlain:function(e){this.replace.apply(this,arguments)},replace:function(e){var t,o=this.active_modals.pop();switch(t=_.defaults({options:this.prepareOptions.apply(this,arguments)},o),o.$obj.detach(),t.options.type){case"$":t.$obj=t.options.$obj;break;case"unframed_html":t.$obj=$($.parseHTML(t.options.body));break;default:t.$obj=this.makeFramed$Object(t.options)}return t.$wrapper.hide(),t.$wrapper.append(t.$obj),this.active_modals.push(t),this.parseForceResponse(t),t.$wrapper.fadeIn(t.options.mask_fade_in_speed,(function(){"alert"===t.options.type&&t.options.focus_on_alert&&t.$obj.find("button").first().focus(),t.options.hasOwnProperty("onShow")&&setTimeout((function(){t.options.onShow()}),1)})),this.fitMasks(),t},removeModal:function(e){e.$obj.detach(),e.$obj.off("click.modal"),e.$mask.remove(),e.$wrapper.remove(),e.options.hasOwnProperty("onClose")&&e.options.onClose()},closePenultimateModal:function(){var e;this.active_modals.length<2||(e=this.active_modals.pop(),this.removeModal(this.active_modals.pop()),this.active_modals.push(e))},closeAllModals:function(){this.active_modals.length>0&&(this.closeTopModal(),this.closeAllModals())},makeHelp:function(e){var t;return t=this.appendClassToInput("aops-modal-standard",e,arguments),$("<div/>",{class:"aops-modal-help"}).on("click",_.bind((function(){this.show.apply(this,t)}),this))}},$(window).resize((function(){e.Modal.fitMasks()})),e.buildLoginConfirm=function(e,t){var o=null,s={buttons:[{text:"Create Account",value:2},{text:"Sign In",value:1},{text:"Cancel",value:0}],type:"buttons",body:e,frame_class:"aops-modal-standard login-prompt-modal",close_on_button_click:!1,width:"500px",onButtonClick:function(e){2===(e=parseInt(e))?window.location.href="/user/register.php":1===e?AoPS.login.display():o&&AoPS.Ui.Modal.closeParticularModal(o)}};return 2===arguments.length&&(s=_.extend(s,t)),o=AoPS.Ui.Modal.show(s)},e.buildAopsScrollbar=function(e){var t,o={chrome53_hack:!1,slider_size:0,bar_size:0,min_slider_length:12,slider_position:0,is_scrollable:!1,is_dragging:!1,is_visible:!1,axis:"y",loc:"top",scroll_loc:"scrollTop",size_f:"outerHeight",autosize_client:"clientWidth",autosize_f:"outerWidth",is_draggable:!1,hide_scrollbar:!0,show_on_hover:!1,onScroll:void 0,onStopScroll:void 0,slider_end_tolerance:10.5,content_size:-1,content_size_at_last_slider_end_check:0,slider_now_at_end:!1,slider_now_at_start:!1,autosize:!1,autosize_nudge:0,autosize_bargutter:22,autosize_exclusions:[],has_autosize_exclusions:!1,fade_end_active:!1,fade_start_active:!1,activate_keys:!0,stop_scroll_timeout_id:"",stop_scrolling_delay:250,stop_scroll_propagation:!1,onDragStart:function(){},onDragRelease:function(){},arrow_speed:parseInt(e.$content.css("line-height"))};function s(){var e=parseInt(t.$content.first().position()[o.loc]),s=parseInt(t.$bar[o.size_f]()),a=parseInt(t.$content.first()[o.size_f]());t.$bar.data("aops_scroll_"+o.loc,_.isNaN(s)?0:s),t.$content.first().data("aops_scroll_"+o.loc,_.isNaN(a)?0:a),t.$content.first().data("aops_target_loc_"+o.loc,_.isNaN(e)&&_.isUndefined(e)?0:e),o.autosize&&t.$outer_wrapper.data("aops_scroll_not_"+o.loc,t.$outer_wrapper[0][o.autosize_client])}function a(){var e;"scroll"===t.$inner_wrapper.css("overflow-"+o.axis)&&function(){var e,t,s;if(o.has_autosize_exclusions)for(e=o.autosize_exclusions.length,t=window.innerWidth,s=0;s<e;s++)if(t>=o.autosize_exclusions[s].min&&t<=o.autosize_exclusions[s].max)return!1;return!0}()?(e=t.$outer_wrapper[0][o.autosize_client])>0&&(t.$inner_wrapper[o.autosize_f](e+o.autosize_bargutter),o.is_visible?t.$content[o.autosize_f](e-o.autosize_nudge):t.$content[o.autosize_f](e)):(t.$inner_wrapper[o.autosize_f](""),t.$content[o.autosize_f](""))}e.hasOwnProperty("$scrollbar")||console.log("You called AoPS.Ui.buildAopsScrollbar without setting $scrollbar.\tBad.  I quit."),e.hasOwnProperty("$content")||console.log("You called AoPS.Ui.buildAopsScrollbar without setting $ content.  Bad.\t I quit."),(o=_.defaults(_.pick.apply({},_.union([e],_.keys(o))),o)).autosize_exclusions.length>0&&(o.has_autosize_exclusions=!0),"x"===o.axis&&(o=_.extend(o,{loc:"left",scroll_loc:"scrollLeft",size_f:"outerWidth",autosize_client:"clientHeight",autosize_f:"outerHeight"})),t={$slider:e.$scrollbar.find(".aops-scroll-slider").first(),$bar:e.$scrollbar,$outer_wrapper:e.$scrollbar.parent(),$inner_wrapper:e.$content.parent(),$content:e.$content,get:function(e){return o.hasOwnProperty(e)?o[e]:null},adjustSlider:function(){var e,t,s=this.$inner_wrapper[o.size_f](),a=this.$content[o.size_f]();o.content_size=a,o.bar_size=this.$bar[o.size_f]()-o.min_slider_length,e=-1*(parseFloat(this.$inner_wrapper[o.scroll_loc]())-0),o.slider_size=s/a*o.bar_size,t=s/a*o.bar_size+o.min_slider_length,this.$slider[o.size_f](t-this.getBorderNudge()),a<=s?(o.is_scrollable=!1,this.$slider.css({display:"none"}),o.hide_scrollbar&&this.setBarVisibility(!1),o.slider_position=0):(o.is_scrollable=!0,o.slider_position=e<0?e+a<s?o.bar_size-o.slider_size+.5:-e/a*o.bar_size+.5:0,this.$slider.css({display:"block"}),o.show_on_hover&&!o.is_dragging?this.$outer_wrapper.data("hovered")?this.setBarVisibility(!0):o.hide_scrollbar&&this.setBarVisibility(!1):this.setBarVisibility(!0)),o.slider_position+o.slider_size>o.bar_size&&(o.slider_position=o.bar_size-o.slider_size),this.$slider.css(o.loc,o.slider_position),this.checkSliderAtEnd()},setBarVisibility:function(e){this.$bar.toggle(e),o.is_visible=e,this.$outer_wrapper.toggleClass("aops-scrollbar-visible",e),this.$outer_wrapper.toggleClass("aops-scrollbar-not-visible",!e),o.autosize&&a(),e&&o.chrome53_hack&&t.$inner_wrapper.css("overflow-"+o.axis,"scroll")},getBorderNudge:function(){return"x"===o.axis?parseFloat(this.$slider.css("border-left-width"))+parseFloat(this.$slider.css("border-right-width")):parseFloat(this.$slider.css("border-top-width"))+parseFloat(this.$slider.css("border-bottom-width"))},moveSlider:function(e){o.slider_position=Math.min(Math.max(0,e),o.bar_size-o.slider_size),this.$slider.css(o.loc,o.slider_position),this.scrollTargets(),this.adjustSlider()},scrollTargets:function(){var e=this.$content[o.size_f]();o.content_size=e,this.$inner_wrapper[o.scroll_loc](o.slider_position*e/o.bar_size+.5),this.checkSliderAtEnd()},checkSliderAtEnd:function(){o.content_size_at_last_slider_end_check!==parseInt(o.content_size)&&(o.slider_now_at_end=!1,o.content_size_at_last_slider_end_check=parseInt(o.content_size)),o.slider_position>o.bar_size-o.slider_size-o.slider_end_tolerance?!0==!o.slider_now_at_end&&(o.slider_now_at_end=!0,o.is_visible&&this.$bar.trigger("slider_at_end"),o.fade_end_active&&o.$fade_end.css({display:"none"})):(o.slider_now_at_end=!1,o.fade_end_active&&(o.bar_size<0?o.$fade_end.css({display:"none"}):o.is_visible&&o.$fade_end.css({display:"block"}))),o.slider_position<o.slider_end_tolerance?(!0==!o.slider_now_at_start&&(o.slider_now_at_start=!0,o.is_visible&&this.$bar.trigger("slider_at_start")),o.fade_start_active&&o.$fade_start.css({display:"none"})):(o.slider_now_at_start=!1,o.fade_start_active&&o.$fade_start.css({display:"block"}))}};var i=0;o.chrome53_hack||t.$inner_wrapper.css("overflow-"+o.axis,"scroll"),t.$inner_wrapper.on("scroll.adjust_slider touchmove.adjust_slider",(function(e){t.adjustSlider(),_.isUndefined(o.onScroll)||o.onScroll(e),_.isUndefined(o.onStopScroll)||(window.clearTimeout(o.stop_scroll_timeout_id),o.stop_scroll_timeout_id=setTimeout(o.onStopScroll,o.stop_scrolling_delay))})),o.stop_scroll_propagation&&"y"===o.axis&&t.$inner_wrapper.on("mousewheel DOMMouseScroll",(function(e){var s,a,i=Math.max(-1,Math.min(1,e.originalEvent.wheelDelta||-e.originalEvent.detail)),n=t.$inner_wrapper[o.scroll_loc]();if(t.$bar.is(":visible"))return i>0&&n-i<0?(t.$inner_wrapper[o.scroll_loc](0),r()):(s=t.$inner_wrapper[o.size_f](),a=t.$content[o.size_f](),i<0&&(n+s)/a>.99?(t.moveSlider(a-s),r()):void 0);function r(){return t.adjustSlider(),e.preventDefault(),e.stopPropagation(),!1}})),t.$bar.on("mousedown",(function(s){var a=s["page"+o.axis.toUpperCase()]-e.$scrollbar.offset()[o.loc];t.moveSlider(a-o.slider_size/2),s.stopPropagation(),s.preventDefault()})),t.$bar.on("reset_end_watchers",(function(){o.slider_now_at_start=!1,o.slider_now_at_end=!1})),t.$slider.on("mousedown touchstart",(function(s){var a="page"+o.axis.toUpperCase(),i=s.originalEvent.hasOwnProperty("touches")?s.originalEvent.touches[0][a]:s[a],n=parseFloat(t.$slider.position()[o.loc]);o.is_dragging=!0,$(document).bind("mousemove touchmove",(function(e){return t.moveSlider(n+(e.originalEvent.hasOwnProperty("touches")?e.originalEvent.touches[0][a]:e[a])-i),!1})).bind("mouseup touchend",(function(s){$(document).unbind("mousemove mouseup touchmove touchend"),o.is_dragging=!1,e.hasOwnProperty("end_f")&&e.end_f(),t.adjustSlider(),s.stopPropagation(),s.preventDefault()})),s.stopPropagation(),s.preventDefault()})),o.is_draggable&&t.$inner_wrapper.on("mousedown.drag",(function(s){var a="page"+o.axis.toUpperCase(),i=s.originalEvent.hasOwnProperty("touches")?s.originalEvent.touches[0][a]:s[a],n=parseFloat(t.$inner_wrapper[o.scroll_loc]());o.is_dragging=!0,$(document).bind("mousemove touchmove",(function(e){return o.onDragStart(),t.$inner_wrapper[o.scroll_loc](n-(e.originalEvent.hasOwnProperty("touches")?e.originalEvent.touches[0][a]:e[a])+i),t.adjustSlider(),!1})).bind("mouseup touchend",(function(s){$(document).unbind("mousemove mouseup touchmove touchend"),o.is_dragging=!1,e.hasOwnProperty("end_f")&&e.end_f(),t.adjustSlider(),s.stopPropagation(),s.preventDefault(),o.onDragRelease()})),s.stopPropagation(),s.preventDefault()})),t.$slider.on("click",(function(e){e.stopPropagation(),e.preventDefault()})),t.$bar.on("click",(function(e){e.stopPropagation(),e.preventDefault()})),o.activate_keys&&(t.$content.add(t.$bar).hover((function(){$(this).data("hover",1)}),(function(){$(this).data("hover",0)})),$(document).keydown((function(e){_.each(t.$content,(function(s){var a=document.activeElement||document.body;if(t.$slider.is(":visible")&&(1===$(s).data("hover")||1===$(t.$bar).data("hover"))){if("textarea"===a.type||"input"===a.type)return!0;if("y"===o.axis)switch(e.which){case 33:t.moveSlider(o.slider_position-o.slider_size);break;case 34:t.moveSlider(o.slider_position+o.slider_size);break;case 35:e.ctrlKey&&(t.moveSlider(o.bar_size-o.slider_size),t.$bar.trigger("slider_at_end"));break;case 36:e.ctrlKey&&(t.moveSlider(0),t.$bar.trigger("slider_at_start"));break;case 38:t.moveSlider(o.slider_position-o.arrow_speed*o.slider_size/o.bar_size-.5);break;case 40:t.moveSlider(o.slider_position+o.arrow_speed*o.slider_size/o.bar_size-.5);break;default:return!0}if("x"===o.axis)switch(e.which){case 37:t.moveSlider(o.slider_position-o.arrow_speed*o.slider_size/o.bar_size);break;case 39:t.moveSlider(o.slider_position+o.arrow_speed*o.slider_size/o.bar_size);break;default:return!0}return e.stopPropagation(),e.preventDefault(),!1}}))}))),o.show_on_hover&&t.$outer_wrapper.hover((function(){$(this).data("hovered",!0)}),(function(){$(this).data("hovered",!1)})),(o.fade_start_active=e.hasOwnProperty("fade_start_class"))&&(o.$fade_start=$($.parseHTML('<div class="'+e.fade_start_class+'"></div>')),t.$outer_wrapper.append(o.$fade_start)),(o.fade_end_active=e.hasOwnProperty("fade_end_class"))&&(o.$fade_end=$($.parseHTML('<div class="'+e.fade_end_class+'"></div>')),t.$outer_wrapper.append(o.$fade_end)),t.$outer_wrapper.on("scroll touchmove",(function(e){$(e.target).scrollLeft(0),$(e.target).scrollTop(0)})),"y"===o.axis&&(t.$bar.bind("mousewheel",(function(e,s){if(t.$slider.is(":visible"))return t.moveSlider(o.slider_position-o.bar_size/o.slider_size*s),!1})),setTimeout((function(){var e=t.$inner_wrapper.outerWidth(!0)-t.$inner_wrapper.prop("scrollWidth"),o=Math.max(e,15),s=(parseInt(t.$inner_wrapper.css("left"))||0)+(parseInt(t.$outer_wrapper.css("padding-left"))||0);t.$inner_wrapper.css({width:"calc(100% + "+o+"px)"}),0===e&&t.$content.css({"max-width":"calc(100% - "+(o+s)+"px)"})}),0)),function e(){(t.$inner_wrapper.is(":visible")&&(Math.abs(parseInt(t.$content.first()[o.size_f]())-t.$content.first().data("aops_scroll_"+o.loc))>0||Math.abs(parseInt(t.$bar[o.size_f]())-t.$bar.data("aops_scroll_"+o.loc))>0||Math.abs(parseInt(t.$content.first().position()[o.loc])-t.$content.first().data("aops_target_loc_"+o.loc))>0)||function(){if(!o.autosize)return!1;var e=t.$outer_wrapper;return!!e[0]&&Math.abs(parseInt(e[0][o.autosize_client])-e.data("aops_scroll_not_"+o.loc))>0}())&&(s(),t.adjustSlider(),o.autosize&&a()),setTimeout((function(){e()}),200)}(),t.adjustSlider(),s(),function e(){t.$content.first().is(":visible")?(o.arrow_speed=parseInt(t.$content.first().css("line-height")),(_.isNaN(o.arrow_speed)||o.arrow_speed<1)&&(o.arrow_speed=10),s()):setTimeout((function(){i<3?(e(),i+=1):(o.arrow_speed=10,s())}),1e3)}(),t.checkSliderAtEnd(),o.autosize&&a(),o.show_on_hover&&(t.$outer_wrapper.on("mouseenter",(function(e){o.is_scrollable&&t.setBarVisibility(!0)})),t.$outer_wrapper.on("mouseleave",(function(e){o.is_dragging||t.setBarVisibility(!1)}))),e.$scrollbar.aopsScroll=t},$.fn.extend({buildAopsScrollbar:function(e){return AoPS.Ui.buildAopsScrollbar($.extend(e,{$scrollbar:this}))},wrapWithScroll:function(e){var t=$($.parseHTML('<div class="aops-scroll-outer"><div class="aops-scroll-bar"><div class="aops-scroll-slider"></div></div><div class="aops-scroll-inner"></div></div>')),o=t.find(".aops-scroll-bar");return this.addClass("aops-scroll-content"),t.find(".aops-scroll-inner").append(this),o.buildAopsScrollbar($.extend(e,{$content:this})),t.aopsScroll=o.aopsScroll,t}}),e.buildAutocomplete=function(e){var t;return(e=_.defaults(e,{match_type:"any",is_case_sensitive:!1,delay:0,autoFocus:!0,minLength:2,num_matches:0,ui_class:""})).$input.parent().addClass("ui-front"),e.$input.addClass("ui-autocomplete-input"),e.$input.autocomplete({autoFocus:e.autoFocus,source:"function"==typeof e.source?e.source:(t=_.isFunction(e.transformBeforeCompare)?e.transformBeforeCompare:_.identity,"from_start"===e.match_type||"any"===e.match_type?function(o,s){var a=new RegExp(("from_start"===e.match_type?"^":"")+$.ui.autocomplete.escapeRegex(t(o.term)),e.is_case_sensitive?"":"i"),i=_.filter(e.source,(function(e){return a.test(t(e.label))}));e.num_matches>0&&(i=i.slice(0,e.num_matches)),s(i)}:"from_start_then_any"===e.match_type?function(o,s){var a=new RegExp("^"+$.ui.autocomplete.escapeRegex(t(o.term)),e.is_case_sensitive?"":"i"),i=new RegExp($.ui.autocomplete.escapeRegex(t(o.term)),e.is_case_sensitive?"":"i"),n=_.union(_.filter(e.source,(function(e){return a.test(t(e.label))})),_.filter(e.source,(function(e){return i.test(t(e.label.substring(1)))})));e.num_matches>0&&(n=n.slice(0,e.num_matches)),s(n)}:void 0),minLength:e.minLength,delay:e.delay,position:e.hasOwnProperty("position")?e.position:{},response:function(t,o){if(e.hasOwnProperty("blockResponse")&&e.blockResponse())e.$input.hasClass("ui-autocomplete-input")&&e.$input.autocomplete("close");else{var s=_.isNaN(this.selectionStart)?$(this).val():$(this).val().substr(0,this.selectionStart),a=s.length;o.content.length>0&&37!==$(this).data("last_key")&&8!==$(this).data("last_key")&&46!==$(this).data("last_key")&&new RegExp("^"+$.ui.autocomplete.escapeRegex(s),"i").test(o.content[0].value)&&($(this).val(s+o.content[0].value.substring(a)),this.setSelectionRange(a,o.content[0].label.length))}},open:function(t,o){if(!_.isFunction(e.transformBeforeCompare)){var s=$(this).data("ui-autocomplete").menu,a=$(this).data("ui-autocomplete").term.substr(0,this.selectionStart),i=new RegExp($.ui.autocomplete.escapeRegex(a),"gi");s.element.find("a").each((function(){$(this).html($(this).text().replace(i,(function(e){return'<span class="ui-autocomplete-term">%s</span>'.replace("%s",e)})))})),e.hasOwnProperty("onOpen")&&e.onOpen(this)}}}),e.hasOwnProperty("onFocus")&&e.$input.on("autocompletefocus",(function(t,o){e.onFocus(t,o)})),e.hasOwnProperty("onSelect")&&e.$input.on("autocompleteselect",(function(t,o){e.onSelect(t,o)})),e.hasOwnProperty("_renderItem")&&(e.$input.data("ui-autocomplete")._renderItem=e._renderItem),e.hasOwnProperty("change")&&e.$input.on("autocompletechange",e.change),e.$input.on("click",(function(e){this.selectionEnd===this.value.length&&$(this).autocomplete("search",this.value)})),e.$input.on("keydown",(function(e){var t=this.value.substr(this.selectionStart,1).toUpperCase().charCodeAt(0),o=e.which||e.keyCode;if(t===o)return this.setSelectionRange(this.selectionStart+1,this.value.length),e.stopPropagation(),e.preventDefault(),$(this).autocomplete("search",this.value.substring(0,this.selectionStart)),!1;$(this).data("last_key",o)})),e.ui_class.length>0&&e.$input.autocomplete("widget").addClass(e.ui_class),e.$input},$.fn.extend({aopsAutocomplete:function(e){return AoPS.Ui.buildAutocomplete($.extend(e,{$input:this}))}}),e.getScrollbarWidth=function(){return"number"!=typeof e.scrollbarWidth&&(e.scrollbarWidth=e.computeScrollbarWidth()),e.scrollbarWidth},e.computeScrollbarWidth=function(){var e=jQuery('<div style="width: 100%; height:200px;">test</div>'),t=jQuery('<div style="width:200px;height:150px; position: absolute; top: 0; left: 0; visibility: hidden; overflow:hidden;"></div>').append(e),o=e[0],s=t[0];jQuery("body").append(s);var a=o.offsetWidth;t.css("overflow","scroll");var i=s.clientWidth;return t.remove(),a-i},e.buildUsernameAutocomplete=function(e,t){var o=_.extend({match_type:"from_start_then_any",delay:100,is_case_sensitive:!1,source:function(e,o){new AoPS.Ajax.ScriptRunner("/m/community/ajax.php").run("fetch_username_matches",{username_stub:e.term},(function(e,s){var a;e?(a=_.map(s.response.usernames,(function(e){return _.defaults(e,{label:e.value})})),t&&t.num_matches&&a.length>t.num_matches&&(a=a.slice(0,t.num_matches)),o(a)):o([])}))},num_matches:10,position:{my:"left top+5"},ui_class:"username-autocomplete"},t);e.aopsAutocomplete(o)},$.fn.extend({aopsUsernameAutocomplete:function(e){AoPS.Ui.buildUsernameAutocomplete(this,e)}}),e.autoExpandTextarea=function(e){var t=e.outerHeight(),o=parseInt(e.css("paddingBottom"),10)+parseInt(e.css("paddingTop"),10);function s(){if(e[0].scrollHeight){var t=$(window).scrollTop();e.height("auto").height(e[0].scrollHeight-o),$(window).scrollTop(t)}else setTimeout(s,500)}e[0].scrollHeight+o<=t&&(o=0),/\S/.test(e.val())&&s(),e.on("input keyup",s),$(window).on("resize",s)},e.LoadingModal={show:function(){this.loadingModal=AoPS.Ui.Modal.showMessage('<img src="/assets/images/logo-loader.gif" />',{closeX:!1,force_response:!0,frame_class:"loading-modal-frame"})},close:function(){AoPS.Ui.Modal.closeParticularModal(this.loadingModal)}},e}(AoPS.Ui||{}),function(e){var t="aopsscroll",o={adjust_container:20};function s(t,s,a){var i=e.extend({},o,a),n=0,r=['<div class="aops-scroll-outer">','<div class="aops-scroll-bar"><div class="aops-scroll-slider"></div></div>','<div class="aops-scroll-inner">','<div class="aops-scroll-content">',e(t).html(),"</div>","</div>","</div>"].join("");e(t).html(r),i.axis&&"x"===i.axis?(n=parseInt(e(t).find(".aops-scroll-outer").height()),e(t).find(".aops-scroll-inner").height(n+i.adjust_container)):(n=parseInt(e(t).find(".aops-scroll-outer").width()),e(t).find(".aops-scroll-inner").width(n+i.adjust_container)),i.$scrollbar=e(t),i.$content=e(t).find(".aops-scroll-content"),AoPS.Ui.buildAopsScrollbar(i)}e.fn[t]=function(o,a){return this.each((function(){e.data(this,"plugin_"+t)||e.data(this,"plugin_"+t,new s(this,o,a))}))}}(jQuery),AoPS.Ui.ui_main_loaded=!0);
;var SHRUNKEN_HEADER_CLASS="shrunken-header";AoPS.GoToHash=function(e){var s=e.substring(1).replace(/^([a-zA-Z0-9\-]*).*/,"$1");if(s){var a=$("#"+s).length?$("#"+s):$("a[name="+s+"]");if(canNavResize&&a.offset()){var n=a.offset().top;$("#header").hasClass(SHRUNKEN_HEADER_CLASS)?n-=$("#header").height():n-=2*$("#header").height(),$("body,html").animate({scrollTop:n},300,"swing")}}};var canNavResize=!1,getWindowWidth=function(){return window.innerWidth},isMobile=function(){return window.matchMedia("(max-width: 700px)").matches};$(window).on("load",(function(){if(window.location.hash)try{var e=$(window.location.hash);e.length&&(e=e.offset().top,$("#header").hasClass(SHRUNKEN_HEADER_CLASS)?e-=$("#header").height():e-=2*$("#header").height(),$("body,html").animate({scrollTop:e}))}catch(s){}window.addEventListener("hashchange",(function(){setTimeout((function(){AoPS.GoToHash(window.location.hash)}),10)}))})),$((function(){var e=getWindowWidth(),s=function(e){return e.classList.contains("menubar-label-direct-link")};$(".menubar-label-link-outer").on("click",(function(e){var a,n,i,o,t,r;!isMobile()||s(e.target)||s(e.target.parentNode)||(a=this,n=$(a).next().find(".dropdown-content"),i=$(a).parent(),o=$(i).height(),t=$(n).height(),r=o,r=o>t+12?o-t-6:o+t+6,$(i).height(r))})),$(window).on("resize",(function(s){if(getWindowWidth()!==e)if(e=getWindowWidth(),isMobile()){$(".menubar-labels").css({display:"none"});var a=$("body").height(),n=$("#header-wrapper").height();$(".menubar-labels").height(a-n),$(".menubar-label").each((function(e){$(this).height("auto")}))}else $(".menubar-label").each((function(e){$(this).height(16)})),$(".menubar-labels").css({display:"flex",minHeight:0}),$(".menubar-labels").height("auto")})),$(".menubar-hamburger").on("click",(function(e){var s=$("body").height(),a=$("#header-wrapper").height();"none"===$(".menubar-labels").css("display")?($(".menubar-labels").css({display:"block"}),$(".menubar-labels").css({height:"auto",minHeight:s-a+"px"})):$(".menubar-labels").css({display:"none"})})),$(".dropdown-content a").on("click",(function(e){isMobile()&&$(".menubar-labels").css({display:"none"})})),$(".superuser").on("click",(function(e){$.post("/ajax.php",{action:"toggle-superuser"},(function(e){e.response&&e.response.success?(AoPS.Ui.Flyout.display("Sucessfully "+(e.response.superuser?"enabled":"disabled")+" superuser permissions."),$(".superuser").text(e.response.superuser?"Disable Superuser":"Enable Superuser")):AoPS.Ui.Flyout.display(e.error_msg)}))}));var a=!1,n=!1,i=$("#header"),o=$("#header-wrapper"),t=_.throttle(_.bind((function(){n&&(a=!1,n=!1,$("body,html").stop().animate());var e=$(window).scrollTop(),s=i.hasClass(SHRUNKEN_HEADER_CLASS);e>70&&!s?(o.addClass("shrunken-header-wrapper"),i.addClass(SHRUNKEN_HEADER_CLASS)):e<=0&&s&&(o.removeClass("shrunken-header-wrapper"),i.removeClass(SHRUNKEN_HEADER_CLASS))}),this),100),r=$("body"),l=r.hasClass("community")||r.hasClass("school-class-page")||r.hasClass("mediawiki")||r.hasClass("cart")||r.hasClass("ebooks")||r.hasClass("dashboard")||r.hasClass("resources")||r.hasClass("small-header")||r.hasClass("no-nav-resize");isMobile()||l||(canNavResize=!0,t(),$("#header-wrapper").addClass("sticky"),$(window).on("scroll",t)),$("div.slide-button").on("click",(function(){if(!a){a=!0,n=!1;var e=$(".callouts-container").offset().top;isMobile()||(e-=2*$("#main-menubar").height()),$("body,html").animate({scrollTop:e},1200,"swing",(function(){a=!1}))}})),document.body.addEventListener("wheel",(function(){n=!0})),$(window).on("resize",(function(e){isMobile()||canNavResize||l?isMobile()&&canNavResize&&(canNavResize=!1,$("#header").removeClass(SHRUNKEN_HEADER_CLASS),$(window).off("scroll",t)):(canNavResize=!0,$(window).on("scroll",t))}))}));
;AoPS.Utils=function(t){var e,n;return t.getKeyChain=function(t,e){if(_.isObject(t))return _.isArray(e)||(e=_.toArray(arguments).slice(1)),_.reduce(e,(function(t,e){if(!(!t||!t.hasOwnProperty(e)))return t[e]}),t)},t.hasKeyChain=function(){var e=t.getKeyChain.apply(this,arguments);return!_.isUndefined(e)},t.initKeyChain=function(t,e,n){return _.isArray(e)?_.isUndefined(n)&&(n={}):(e=_.toArray(arguments).slice(1),n={}),_.reduce(e,(function(t,r,o){var i=o===e.length-1?n:{};return t.hasOwnProperty(r)||(t[r]=i),t[r]}),t)},t.natSortBy=function(t,e,n){var r=new Intl.Collator("en",{numeric:!0});return t.sort((function(t,o){return(n?-1:1)*r.compare(""+e(t),""+e(o))}))},t.natSort=function(e,n){return t.natSortBy(e,(function(t){return t}),n)},t.isValidEmail=function(t){return t&&/^[A-Z0-9._%+\-]+@([A-Z0-9\-]+\.)+[A-Z]{2,}$/i.test(t)},t.Class=(n=function(t){return function(e){var r,o,i;return(o=function(){}).prototype=t.prototype,r=new o,_.extend(r,e),i=function(){this.initialize&&this.initialize.apply(this,arguments)},i.prototype=r,i.extend=n(i),i}},(e=function(){}).extend=n(e),e),t.downloadFile=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"untitled",n=new Blob([t],{type:"text/plain;charset=utf-8"}),r=document.createElement("a");void 0!==r.download&&(r.setAttribute("href",URL.createObjectURL(n)),r.setAttribute("download",e),r.style.visibility="hidden",document.body.appendChild(r),r.click(),document.body.removeChild(r))},t.downloadFileOnClick=function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"untitled";$(document).on("click",t,(function(){AoPS.Utils.downloadFile(e,n)}))},t.makeTextEditable=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"textarea";$(t).on("mousedown",(function(){var t=this;if(!$(t).find(".editable-textarea").length){var r=$(t).text();$(t).text("");var o=$("<"+n+">").addClass("editable-textarea").val(r).appendTo(this).trigger("focus");setTimeout((function(){$(document).on("mousedown",(function(n){$(n.target).is(o)||($(t).text(o.val()),o.remove(),e&&e(t),$(document).prop("onmousedown",null).off("mousedown"))}))}),0)}}))},t.isWootCourse=function(t){return 0===t.indexOf("woot")},t.isMathWootCourse=function(t){return"woot"===t||0===t.indexOf("woot-math")},t}(AoPS.Utils||{});var Base64={_keyStr:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",encode:function(t){var e,n,r,o,i,a,d,c="",u=0;for(t=Base64._utf8_encode(t);u<t.length;)o=(e=t.charCodeAt(u++))>>2,i=(3&e)<<4|(n=t.charCodeAt(u++))>>4,a=(15&n)<<2|(r=t.charCodeAt(u++))>>6,d=63&r,isNaN(n)?a=d=64:isNaN(r)&&(d=64),c=c+this._keyStr.charAt(o)+this._keyStr.charAt(i)+this._keyStr.charAt(a)+this._keyStr.charAt(d);return c},decode:function(t){var e,n,r,o,i,a,d="",c=0;for(t=t.replace(/[^A-Za-z0-9\+\/\=]/g,"");c<t.length;)e=this._keyStr.indexOf(t.charAt(c++))<<2|(o=this._keyStr.indexOf(t.charAt(c++)))>>4,n=(15&o)<<4|(i=this._keyStr.indexOf(t.charAt(c++)))>>2,r=(3&i)<<6|(a=this._keyStr.indexOf(t.charAt(c++))),d+=String.fromCharCode(e),64!==i&&(d+=String.fromCharCode(n)),64!==a&&(d+=String.fromCharCode(r));return d=Base64._utf8_decode(d)},_utf8_encode:function(t){t=t.replace(/\r\n/g,"\n");for(var e="",n=0;n<t.length;n++){var r=t.charCodeAt(n);r<128?e+=String.fromCharCode(r):r>127&&r<2048?(e+=String.fromCharCode(r>>6|192),e+=String.fromCharCode(63&r|128)):(e+=String.fromCharCode(r>>12|224),e+=String.fromCharCode(r>>6&63|128),e+=String.fromCharCode(63&r|128))}return e},_utf8_decode:function(t){for(var e="",n=0,r=0,o=0,i=0;n<t.length;)(r=t.charCodeAt(n))<128?(e+=String.fromCharCode(r),n++):r>191&&r<224?(o=t.charCodeAt(n+1),e+=String.fromCharCode((31&r)<<6|63&o),n+=2):(o=t.charCodeAt(n+1),i=t.charCodeAt(n+2),e+=String.fromCharCode((15&r)<<12|(63&o)<<6|63&i),n+=3);return e}};
;AoPS.Utils.initKeyChain(AoPS,"Ajax"),AoPS.Ajax=function(e){var t,i,s=AoPS.Utils;function n(t,i,s){var n=i.ajax_data,r=i.callback,o=i.timeout||t.timeout;i.action&&(n.a=i.action),AoPS.session&&(n.aops_logged_in=AoPS.session.logged_in,n.aops_user_id=AoPS.session.user_id,n.aops_session_id=AoPS.session.id),s||(s={checkQueue:function(){},signalComplete:function(){}});var u=AoPS&&AoPS.bd&&AoPS.bd.traceparent?AoPS.bd.traceparent:null;return $.ajax({url:t.script_path,data:n,dataType:"json",type:"POST",timeout:o,beforeSend:function(e){e.setRequestHeader("traceparent",u)},error:function(t,i){s.checkQueue(),s.signalComplete(),e.handleError(r,t,i)},success:function(e){s.checkQueue(),s.signalComplete(),e||console.log(t.script_path,n);var i=!e.hasOwnProperty("error_code");r(i,e),_.each(t.global_handlers,(function(t){t(i,e)}))}})}return e.handleError=function(e,t,i){var s=parseInt(t.status);200!==s||t.responseText.length?"abort"===i?e(!1,{response:{},error_code:"E_AJAX_CANCEL",error_msg:"The request was cancelled by the calling code."}):"timeout"===i?e(!1,{response:{},error_code:"E_AJAX_TIMEOUT",error_msg:"Something took too long to happen, and your browser gave up. Please check your internet connection, then try again."}):"parsererror"===i?(console.log(t.responseText),e(!1,{response:{},error_code:"E_AJAX_BADRETURN",error_msg:"You have come across a temporary error with our website. Please try again in an hour, and let us know if you continue to experience problems."})):e(!1,404===s?{response:{},error_code:"E_AJAX_404",error_msg:"The requested script does not exist."}:{response:{},error_code:"E_AJAX_UNKNOWN",error_msg:"Something went wrong. Please check your internet connection, then try again."}):e(!0,{response:{}})},t=s.Class.extend({initialize:function(e){this.processing_id=0,this.processing_xhr=null,this.next_id=1,this.window_size=!e||e<1?1:e,this.processing_size=0,this.queue_id_list=[],this.queue_table={}},getRunningId:function(){return this.processing_id},checkQueue:function(){if(this.processing_id=this.queue_id_list.pop(),this.processing_xhr=null,this.processing_id){var e=this.queue_table[this.processing_id];if(!e)return this.checkQueue();delete this.queue_table[this.processing_id],this.processing_xhr=e.processFunction(e.data,this)}else this.processing_id=0},signalComplete:function(){this.processing_size-=1},cancelId:function(e){var t;return this.queue_table[e]?((t=this.queue_table[e])&&t.data.callback(!1,{response:{},error_code:"E_AJAX_CANCEL",error_msg:"The request was cancelled by the calling code."}),delete this.queue_table[e],!0):!(this.processing_id!==e||!this.processing_xhr||!this.processing_xhr.abort)&&(this.processing_xhr.abort(),!0)},addToQueue:function(e,t,i){var s=this.next_id;return this.next_id+=1,this.queue_table[s]={data:e,processFunction:t},i?this.queue_id_list.push(s):this.queue_id_list=[s].concat(this.queue_id_list),this.processing_size<this.window_size&&this.checkQueue(),this.processing_size+=1,s}}),e.RepetitionFilter=s.Class.extend({initialize:function(e){this.recent_inputs=[],this._clearRecentDebounced=_.debounce(_.bind((function(){this.recent_inputs=[]}),this),e)},sendToFilter:function(e){var t;return t=_.some(this.recent_inputs,(function(t){return _.isEqual(e,t)})),this._clearRecentDebounced(),t||this.recent_inputs.push(e),!t}}),i=new t,e.ScriptRunner=s.Class.extend({initialize:function(s,n){var r;n=n||{},this.script_path=s,this.global_handlers=[],this.timeout=2e4,_.isFinite(n.timeout)&&n.timeout>0&&(this.timeout=n.timeout),r=500,_.isFinite(n.filter_interval)&&(r=n.filter_interval),r>0&&(this.filter_object=new e.RepetitionFilter(r)),this.last_queue_id=0,this.queue_object=i,this.use_queue=!n.hasOwnProperty("use_queue")||!!n.use_queue,this.use_queue&&n.separate_queue&&(this.queue_object=new t(n.window_size))},addGlobalHandler:function(e){return!!_.isFunction(e)&&(this.global_handlers.push(e),!0)},removeGlobalHandler:function(e){var t=this.global_handlers.length;return this.global_handlers=_.reject(this.global_handlers,(function(t){return t===e}),this),this.global_handlers.length<t},getLastQueueId:function(){return this.last_queue_id},getRunningQueueId:function(){return this.use_queue&&this.queue_object?this.queue_object.getRunningId():0},cancelQueueId:function(e){return!(!this.use_queue||!e)&&this.queue_object.cancelId(e)},run:function(e,t,i,s){if(_.isObject(e))return this.run(e.action,e.ajax_data,e.callback,e);s=s||{};var r=_.extend({a:e},t),o={action:e,ajax_data:t,callback:i,timeout:s.timeout},u=_.partial(n,this);return!this.filter_object||s.no_filter||this.filter_object.sendToFilter(r)?(_.isFunction(i)||(console.log("WARNING: No callback provided for AJAX. Using no-op."),o.callback=function(){}),this.use_queue&&!s.no_queue?this.last_queue_id=this.queue_object.addToQueue(o,u,s.queue_at_front):(u(o),this.last_queue_id=0),!0):(setTimeout((function(){i(!1,{error_code:"E_AJAX_FILTERED",error_msg:"The same request was made recently, so this one was filtered."})}),0),!1)}}),e}(AoPS.Ajax);
;AoPS.Utils.initKeyChain(AoPS,"BackboneExtras"),AoPS.BackboneExtras=function(e){var t=AoPS.Utils;function i(e,t){var i;return i='<a data-subviewloc="'+(e=Handlebars.Utils.escapeExpression(e))+'"></a>',new Handlebars.SafeString(i)}return Handlebars.registerHelper("equals",(function(e,t,i){return e==t?i.fn(this):i.inverse(this)})),Handlebars.registerHelper("notEquals",(function(e,t,i){return e!=t?i.fn(this):i.inverse(this)})),Handlebars.registerHelper("ifCond",(function(e,t,i,s){switch(t){case"===":return e===i?s.fn(this):s.inverse(this);case"!==":return e!==i?s.fn(this):s.inverse(this);case"<":return e<i?s.fn(this):s.inverse(this);case"<=":return e<=i?s.fn(this):s.inverse(this);case">":return e>i?s.fn(this):s.inverse(this);case">=":return e>=i?s.fn(this):s.inverse(this);case"&&":return e&&i?s.fn(this):s.inverse(this);case"||":return e||i?s.fn(this):s.inverse(this);default:return s.inverse(this)}})),Handlebars.registerHelper("assign",(function(e,t,i){i.data.root||(i.data.root={}),i.data.root[e]=t})),e.AutocreateMixin={setCreateFunction:function(e){this.createFunction=e},getOrCreate:function(e,t){t=t||{};var i=_.omit(t,["delay_add"]),s=this.get(e);if(s||_.isFunction(this.createFunction))return s||(s=this.createFunction(e))&&!t.delay_add&&this.add(s,i),s}},e.TemplateMixin={setTemplate:function(e,t){"#"!==e[0]&&(e="#"+e),this.compiledTemplate=AoPS.View.compileTemplate(e),this.compiledTemplate||console.log("WARNING: Template ID "+e+" not found"),this.use_root_el=!!t,this.rendered_tpl_before=!1},setTemplateAndUseRootEl:function(e){this.setTemplate(e,!0)},renderTopOnly:function(){var e,t;this.compiledTemplate?""===(e=$.trim(this.compiledTemplate({})))||(this.use_root_el?this.rendered_tpl_before||(t=$($.parseHTML(e)).empty(),this.$el.replaceWith(t),this.setElement(t),this.rendered_tpl_before=!0):this.rendered_tpl_before=!0):this.$el.empty()},renderTemplate:function(e){var t,i;this.compiledTemplate?""===(t=$.trim(this.compiledTemplate(e)))||(this.use_root_el?this.rendered_tpl_before?(this.$el.empty(),this.$el.append($($.parseHTML(t)).contents())):(i=this.$el.html(t).contents(),this.$el.replaceWith(i),this.setElement(i),this.rendered_tpl_before=!0):(this.$el.html(t),this.rendered_tpl_before=!0)):this.$el.empty()}},Handlebars.registerHelper("SUBVIEWLOC",i),Handlebars.registerHelper("subviewloc",i),e.SubviewMixin={reorderAtLocation:function(e,i,s){t.initKeyChain(this,["subviews",e],[]);var n=this.subviews[e].length;if(n){var r=this.subviews[e][n-1];i=_.bind(i,this);var a=_.map(this.subviews[e],(function(e){return{cmp:i(e),view:e}}),this);if(a.sort((function(e,t){return e.cmp<t.cmp?-1:1})),this.subviews[e]=_.pluck(a,"view"),!s){var o=this.subviews[e][n-1];o!==r&&r.$el.after(o.$el),_.each(this.subviews[e].slice(0,-1),(function(e){o.$el.before(e.$el)}))}}},applyToAllAtLocation:function(e,i){t.initKeyChain(this,["subviews",e],[]),_.each(this.subviews[e],_.bind(i,this))},applyToAllSubviews:function(e){t.initKeyChain(this,"subviews"),_.each(this.subviews,(function(t,i){this.applyToAllAtLocation(i,_.partial(e,i))}),this)},isLocationEmpty:function(e){return t.initKeyChain(this,["subviews",e],[]),!this.subviews[e].length},getLocationList:function(){return t.initKeyChain(this,"subviews"),_.reject(_.keys(this.subviews),_.bind(this.isLocationEmpty,this))},clearLocation:function(e,i){t.initKeyChain(this,["subviews",e],[]),this.applyToAllAtLocation(e,(function(e){i?e.$el.detach():this.closeView(e)})),this.subviews[e]=[]},addSubviewToLocation:function(e,i){i=i||"",t.initKeyChain(this,["subviews",i],[]),this.subviews[i].push(e)},detachAllSubviews:function(){this.applyToAllSubviews((function(e,t){t.$el.detach()}))},renderAllSubviews:function(){this.applyToAllSubviews((function(e,t){t.render()}))},attachToHandlebarsLocation:function(e,t){var i=this.$('a[data-subviewloc="'+t+'"]');i.length&&i.first().before(e)},attachAllSubviews:function(){var e={};_.each(this.getLocationList(),(function(t){var i=[];this.applyToAllAtLocation(t,(function(e){i.push(e.$el)})),e[t]=i}),this),_.each(this.getLocationList(),(function(t){var i=e[t];""===t?this.$el.append(i):"@"===t[0]?this.attachToHandlebarsLocation(i,t.slice(1)):this.$(t).append(i)}),this)},removeHandlebarsLocationMarkers:function(){this.$("a[data-subviewloc]").remove()},closeAllSubviews:function(){this.applyToAllSubviews((function(e,t){this.closeView(t)})),this.subviews={}},closeView:function(e){e.remove(),e.unbind(),e.onClose&&e.onClose()}},e}(AoPS.BackboneExtras);
;AoPS.Page={},AoPS.Page.loader_html='<div class="aops-loader"><img src="/assets/images/logo-ludicrous.gif" /></div>',AoPS.Page.$loader=$($.parseHTML(AoPS.Page.loader_html)),AoPS.Page.buildLoader=function(){return AoPS.Page.$loader.clone()},AoPS.Page.Model=Backbone.Model.extend({initialize:function(){this.set("elements",{}),this.set("active_elements",[]),this.set("locations",[]),this.set("active_locations",[])},fetchElement:function(e){var t=e.hasOwnProperty("id")?this.findExistingElement(e.id):null;return _.isUndefined(t)||_.isNull(t)?t=this.createElement(e):"backbone"===t.type&&(t.dom_element=t.view.$el),t},findExistingElement:function(e){var t=this.get("elements");return t.hasOwnProperty(e)?t[e]:null},createElement:function(e){var t,o;return e.hasOwnProperty("type")&&"backbone"!==e.type?"jQuery_object"===e.type&&(e.hasOwnProperty("jQuery_object")||(console.log("You tried to initiate a jQuery_object element without sending the object!"),console.log("The id is "+e.id)),t={id:e.id,dom_element:e.jQuery_object,type:"jQuery_object",no_save:!!e.no_save,onAddToPage:e.hasOwnProperty("onAddToPage")?e.onAddToPage:function(){},onRemoveFromPage:e.hasOwnProperty("onRemoveFromPage")?e.onRemoveFromPage:function(){}}):(o=e.constructor(),t={id:e.id,dom_element:o.$el,type:"backbone",view:o,no_save:!!e.no_save,onAddToPage:"function"==typeof o.onAddToPage?function(e){o.onAddToPage(e)}:function(){},onRemoveFromPage:"function"==typeof o.onRemoveFromPage?function(){o.onRemoveFromPage()}:function(){}}),e.no_save||this.insertElement(t),t},insertElement:function(e){this.get("elements")[e.id]=e},activateElement:function(e){var t=this.fetchElement(e);return this.get("active_elements").push(t),t},fetchLocation:function(e){var t=_.find(this.get("locations"),(function(t){return t.id===e}));return _.isUndefined(t)&&(t=this.createLocation(e)),t},createLocation:function(e){var t={id:e,dom_element:$($.parseHTML('<div id="'+e+'"></div>')),is_active:!1};return this.get("locations").push(t),t},activateLocation:function(e){e.is_active=!0,this.get("active_locations").push(e)},clearActiveArrays:function(){this.set("active_elements",[]),this.set("active_locations",[])}}),AoPS.Page.View=Backbone.View.extend({classes:[],$breadcrumbs_wrapper:$("#breadcrumbs-wrapper"),$breadcrumbs_bar:$("#breadcrumbs .crumb-wrapper"),initialize:function(){this.$subheader=$("#subheader"),0===this.$subheader.length&&(this.$subheader=$('<div id="subheader"></div>').css({width:"100%","text-align":"center"}),$("#header").after(this.$subheader)),this.$error_window=$("#page_error_window"),0===this.$error_window.length&&(this.$error_window=$('<div id="page_error_window"></div>').css({width:"100%","text-align":"left"})),this.$loader=AoPS.Page.buildLoader()},findActiveElement:function(e){return _.find(this.model.get("active_elements"),(function(t){return t.id===e}))},showElement:function(e){var t,o=this.model.activateElement(e);return e.hasOwnProperty("location")?"subheader"===e.location?this.$subheader.append(o.dom_element):((t=this.model.fetchLocation(e.location)).is_active||(this.model.activateLocation(t),this.$el.append(t.dom_element)),t.dom_element.append(o.dom_element)):this.$el.append(o.dom_element),o.dom_element.trigger("added_to_page",e.hasOwnProperty("on_add_settings")?e.on_add_settings:{}),o.onAddToPage(e.hasOwnProperty("on_add_settings")?e.on_add_settings:{}),_.clone(o)},showElements:function(e){var t=[];return _.each(e,_.bind((function(e){t.push(this.showElement(e))}),this)),t},hideElement:function(e){e&&(e.dom_element.detach(),"backbone"===e.type&&e.view.$el.detach(),e.onRemoveFromPage(),e.no_save&&"backbone"===e.type&&e.view.close&&e.view.close())},clearPage:function(e){var t=_.extend({remove_modals:!0,hide_loader:!0,remove_all:!0,remove_classes:!0},e);t.remove_modals&&AoPS.Ui.Modal.closeAllModals(),t.hide_loader&&this.hideLoader(),t.remove_classes&&this.clearClasses(),t.remove_all&&(_.each(this.model.get("active_elements"),this.hideElement,this),_.each(this.model.get("active_locations"),(function(e){e.is_active=!1,e.dom_element.detach()})),this.model.clearActiveArrays()),this.showBreadcrumbs()},removeElement:function(e){var t;0!==e.length&&(t=this.model.findExistingElement(e),this.hideElement(t),this.model.set("active_elements",_.without(this.model.get("active_elements"),t)))},forgetElement:function(e){var t;0!==e.length&&(t=this.model.findExistingElement(e),_.isUndefined(t)||(this.hideElement(t),this.model.set("active_elements",_.without(this.model.get("active_elements"),t)),this.model.set("elements",_.without(this.model.get("elements"),t))))},addClass:function(e){this.$el.addClass(e),this.classes.push(e)},removeClass:function(e){this.$el.removeClass(e),this.classes=_.without(this.classes,e)},setClass:function(e){this.clearClasses(),this.addClass(e)},clearClasses:function(){_.each(this.classes,_.bind((function(e){this.$el.removeClass(e)}),this)),this.classes=[]},throwError:function(e){var t;switch(this.clearPage(),e.error_type){case"unregistered":t="You must be signed in to view this page.";break;case"custom":t=e.error_msg}this.$error_window.html(t),this.showElement({id:"page-error-window-"+this.cid,type:"jQuery_object",jQuery_object:this.$error_window})},hideBreadcrumbs:function(){this.$breadcrumbs_wrapper.hide()},showBreadcrumbs:function(){this.$breadcrumbs_wrapper.show()},showLoader:function(){this.$loader.is(":visible")||this.$el.append(this.$loader)},hideLoader:function(){this.$loader.detach()},setBreadcrumbs:function(e,t){var o=_.map(e||[],(function(e,o){var i=e.text,n=e.no_stay?"":" "+(t||"data-stay");return e.url&&(i='<a href="'+e.url+'"'+n+">"+i+"</a>"),'<span class="crumb crumb-'+(o+1)+'">'+i+"</span>"}));this.$breadcrumbs_bar.html($.parseHTML(o.join(' <i class="aops-font aops-angle-double-right"></i> ')))},setTitle:function(e){document.title=e}}),AoPS.Page.setBreadcrumbs=function(e,t){var o=_.map(e||[],(function(e,o){var i=e.text,n=e.no_stay?"":" "+(t||"data-stay");return e.url&&(i="<a "+(e.hasOwnProperty("data")?e.data:"")+' href="'+e.url+'"'+n+">"+i+"</a>"),'<span class="crumb crumb-'+(o+1)+'">'+i+"</span>"}));$("#breadcrumbs .crumb-wrapper").html($.parseHTML(o.join(' <i class="aops-font aops-angle-double-right"></i> ')))},AoPS.Page.showBreadcrumbs=function(){$("#breadcrumbs-wrapper").show()},AoPS.Page.hideBreadcrumbs=function(){$("#breadcrumbs-wrapper").hide()},AoPS.Page.constructPage=function(e){return new AoPS.Page.View({model:new AoPS.Page.Model,id:e})};
;AoPS.AskAoPS=AoPS.AskAops={display:function(a){var o=['<div class="aops-modal-body clearfix askaops">','<div class="askaops-categories">',"<h1>Ask AoPS</h1>","<strong>I have a question about:</strong><br>",'<div style="padding-left:10px;padding-top:10px;line-height:2em;">','<label><input type="radio" name="askaops-category" value="general" checked="checked"> General Information</label>','<label><input type="radio" name="askaops-category" value="book"> Book Recommendations</label>','<label><input type="radio" name="askaops-category" value="class"> Class Recommendations</label>','<label><input type="radio" name="askaops-category" value="order"> Order Information</label>','<label><input type="radio" name="askaops-category" value="myclass"> My Current Class</label>','<label><input type="radio" name="askaops-category" value="technical"> Technical Support</label>','<label><input type="radio" name="askaops-category" value="other"> Other</label>',"</div>","</div>",'<div class="askaops-form">','<div id="askaops-blurb">Have a general question about Art of Problem Solving? Let us know below.</div>','<div data-hj-suppress="" data-hj-masked="" id="askaops-error" class="error-box"></div>','<input data-hj-suppress="" data-hj-masked="" id="askaops-subject" class="form-control" placeholder="Message Subject">','<input data-hj-suppress="" data-hj-masked="" id="askaops-ordernumber" class="askaops-ordernumber form-control" placeholder="Order number - if known">','<input data-hj-suppress="" data-hj-masked="" id="askaops-course" class="askaops-course form-control" placeholder="Class name and id - if known">','<textarea data-hj-suppress="" data-hj-masked="" id="askaops-message" class="form-control"  style="margin-top:10px;height:100px;" placeholder="How can we help you?"></textarea>','<input data-hj-suppress="" data-hj-masked="" id="askaops-username" class="askaops-username form-control" placeholder="AoPS Username - if known">','<input data-hj-suppress="" data-hj-masked="" id="askaops-name" style="margin-top:10px" class="form-control" placeholder="Your name">','<input data-hj-suppress="" data-hj-masked="" id="askaops-email" style="margin-top:10px" class="form-control" placeholder="Your email address">','<div style="text-align:right">','<input id="askaops-submit" style="margin-top:10px" type="submit" class="btn-lg btn btn-primary" value="Submit your message">',"</div>","</div>","</div>"];o=o.join("\n"),AoPS.Ui.Modal.showPlain({body:o,width:"75%",onClose:this.onClose,scrollable:!1,frame_class:"askaops-modal",height:"",max_height:""}),$(".askaops-modal").parent(".aops-modal-wrapper").addClass("askaops-modal-wrapper"),void 0!==a&&setTimeout((function(){"class"===a?($(".askaops input[name='askaops-category'][value=class]").prop("checked",!0),AoPS.AskAoPS.onChange()):"book"===a&&($(".askaops input[name='askaops-category'][value=book]").prop("checked",!0),AoPS.AskAoPS.onChange())}),1),this.onShow()},onChange:function(a){var o=$(".askaops input[name='askaops-category']:checked").val(),s=["Have a general question about Art of Problem Solving?","Let us know below.","<a href='../company/privacy'>View our Privacy Policy</a>."].join(" "),e=["Please tell us about your student's math background, including","their grade level, recent math classes, and contest experience","(if any), as well as your goals for choosing books. You can also","find suggestions on our ",'<a href="/store/recommendations">Recommendations page</a>.',"<a href='../company/privacy'>View our Privacy Policy</a>."].join(" "),r=["Please tell us about your student's math background, including","their grade level, recent math classes, and contest experience","(if any), as well as your goals for choosing a course. You can","also find suggestions on our",'<a href="/school/recommendations">Recommendations page</a>.',"Visit <a href=http://www.artofproblemsolving.com/school/how-school-works/faqs>","Frequently Asked Questions</a> for quick answers to common class questions.","<a href='../company/privacy'>View our Privacy Policy</a>."].join(" "),n=["Have a question about an order? Let us know below.","<a href='../company/privacy'>View our Privacy Policy</a>."].join(" "),t=["Have a question about your current class? Let us know below.",'Visit <a href="/school/how-school-works/faqs">Frequently Asked Questions</a>',"for quick answers to common class questions.","<p>Specific questions about homework problems or assignments","should be posted to your course's message board.","Extension requests can be made from your class homepage.</p>","<a href='../company/privacy'>View our Privacy Policy</a>."].join(" ");switch($("#askaops-username").hide(),$("#askaops-ordernumber").hide(),$("#askaops-course").hide(),o){case"general":$("#askaops-blurb").html(s);break;case"book":$("#askaops-blurb").html(e);break;case"class":$("#askaops-blurb").html(r);break;case"order":$("#askaops-blurb").html(n),$("#askaops-ordernumber").show();break;case"myclass":$("#askaops-blurb").html(t),$("#askaops-username").show(),$("#askaops-course").show();break;case"technical":$("#askaops-username").show(),$("#askaops-blurb").html(["Please include a detailed description of the error or issue you ","are experiencing.","<a href='../company/privacy'>View our Privacy Policy</a>."]);break;case"other":$("#askaops-blurb").html("<a href='../company/privacy'>View our Privacy Policy</a>.")}},onSubmit:function(){$("#askaops-submit").off("click",AoPS.AskAoPS.onSubmit);var a=$(".askaops input[name='askaops-category']:checked").val();$.post("/m/contact/ajax.php",{action:"email",type:a,username:$("#askaops-username").val(),email:$("#askaops-email").val(),name:$("#askaops-name").val(),subject:$("#askaops-subject").val(),message:$("#askaops-message").val(),orderid:$("#askaops-ordernumber").val(),course:$("#askaops-course").val(),url:window.location.href},(function(a){if(a.error_msg)$("#askaops-error").html(a.error_msg).show(),$("#askaops-submit").on("click",AoPS.AskAoPS.onSubmit);else{AoPS.Ui.Modal.closeTopModal();AoPS.Ui.Modal.showAlertQuick(["<p>Thank you. We have received your comment or question.</p>","<p>One of our staff members will respond to you within two","business days.</p>"].join(" "))}}))},onShow:function(){$(".askaops input[name='askaops-category']").on("change",this.onChange),$("#askaops-submit").on("click",this.onSubmit)},onClose:function(){$(".askaops input[name='askaops-category']").off("change",this.onChange),$("#askaops-submit").off("click",this.onSubmit)}};
;function _typeof(e){return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},_typeof(e)}function ownKeys(e,t){var o=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),o.push.apply(o,n)}return o}function _objectSpread(e){for(var t=1;t<arguments.length;t++){var o=null!=arguments[t]?arguments[t]:{};t%2?ownKeys(Object(o),!0).forEach((function(t){_defineProperty(e,t,o[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(o)):ownKeys(Object(o)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(o,t))}))}return e}function _defineProperty(e,t,o){return(t=_toPropertyKey(t))in e?Object.defineProperty(e,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[t]=o,e}function _toPropertyKey(e){var t=_toPrimitive(e,"string");return"symbol"==_typeof(t)?t:t+""}function _toPrimitive(e,t){if("object"!=_typeof(e)||!e)return e;var o=e[Symbol.toPrimitive];if(void 0!==o){var n=o.call(e,t||"default");if("object"!=_typeof(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}AoPS.EnrollUtils={enrollState:{username:null,existingStudentPlatformID:null,productName:"",onUsernameContinue:null,enrollModel:null,bookOption:null,forEbook:!1},displayEnroll:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{title:"",productName:"",onUsernameContinue:null,enrollModel:null,forEbook:!1,isSelfPaced:!1};if(void 0===AoPS.ClassWallet||!AoPS.ClassWallet.checkSessionQuick()||t.forEbook||AoPS.ClassWallet.allowClasswalletForClass(parseInt(t.enrollModel.get("course").is_self_paced))){var o=this.getExistingLoginIds(),n=o.enrollNameData,r=o.selfLoginId,l=n||r?"enroll-account-prompt-existing-children-tpl":"enroll-account-prompt-tpl";t.productName&&(this.enrollState.productName=t.productName),t.onUsernameContinue&&(this.enrollState.onUsernameContinue=t.onUsernameContinue),t.enrollModel&&(this.enrollState.enrollModel=t.enrollModel),t.title&&(this.enrollState.title=t.title),"boolean"==typeof t.forEbook&&(this.enrollState.forEbook=t.forEbook);var i={name:this.enrollState.productName,enrollNameData:n,selfLoginId:r,buttonText:t.buttonText||"Continue",forEbook:this.enrollState.forEbook};if($(".enroll-main").length)this.showTemplate(l,i);else{var a=Handlebars.compile($$(l).innerHTML);this.enrollState.modalEl=AoPS.Ui.Modal.show({frame_class:"aops-modal-standard enroll-modal",title:t.title||this.enrollState.title,body:'<div class="enroll-main">'.concat(a(i),"</div>"),width:"600px",max_height:"100%",scrollable:!0})}n||r?this.setupUsernameSelection(n&&n.map((function(e){return e.username})),r):this.enrollState.username&&$("input.username").val(this.enrollState.username),$(".username-prompt-continue-button").on("click",(function(){var t=e.getSelectedUserData();AoPS.EnrollUtils.usernameSubmit(t)})),$(".new-account-button").on("click",(function(){AoPS.Ui.Modal.removeModal(e.enrollState.modalEl),AoPS.Register.display({allowLoggedIn:!0,skipLoadingModal:!0,replaceModal:!0,onSuccess:function(t){e.enrollState.username=t,e.enrollState.onUsernameContinue?e.enrollState.onUsernameContinue({username:t}):e.displayBookOptions(_objectSpread(_objectSpread({},e.enrollState.enrollModel.attributes),{},{username:t,cost:parseInt(e.enrollState.enrollModel.get("cost"))}))},cancel:function(){e.displayEnroll()}})}))}else console.log("Not allowed, returning")},usernameSubmit:function(e){var t=this;if(this.enrollState.username=e.username,this.enrollState.existingStudentPlatformID=e.existingStudentPlatformID,this.enrollState.onUsernameContinue)this.enrollState.onUsernameContinue(e);else{var o={action:"user-get",username:e.username};e.existingStudentPlatformID?this.displayBookOptions(_objectSpread(_objectSpread({},this.enrollState.enrollModel.attributes),{},{username:e.username,cost:parseInt(this.enrollState.enrollModel.get("cost"))})):$.post("/ajax.php",o,(function(o){"E_NOUSER"===o.error_code?t.showError("Username does not exist."):o.error_msg?t.showError("Invalid username."):t.displayBookOptions(_objectSpread(_objectSpread({},t.enrollState.enrollModel.attributes),{},{username:e.username,cost:parseInt(t.enrollState.enrollModel.get("cost"))}))}))}},displayBookOptions:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if($(".enroll-main").length){var o=this.enrollState.enrollModel.get("course");t.isSelfPaced=!1,o&&"1"===o.is_self_paced.toString()&&(t.isSelfPaced=!0),this.showTemplate("enroll-textbook-options-tpl",t)}else{var n=Handlebars.compile($$("enroll-textbook-options-tpl").innerHTML);this.enrollState.modalEl=AoPS.Ui.Modal.show({frame_class:"aops-modal-standard enroll-modal",title:t.title||this.enrollState.title,body:'<div class="enroll-main">'.concat(n(t),"</div>"),width:"600px",max_height:"100%",scrollable:!0})}!$("input[name=enroll-with]:checked").val()&&this.enrollState.bookOption&&$("input[name=enroll-with]").filter('[value="'+this.enrollState.bookOption+'"]').prop("checked",!0),$(".book-options-back-button").on("click",(function(){e.displayEnroll()})),$(".book-options-next-button").on("click",(function(){var t=e.getSelectedBookOption();e.enrollState.enrollModel.submitEnrollment(e.enrollState.username,e.enrollState.existingStudentPlatformID||"",t,(function(e){if(e.error_msg)$("#enrollment-error").show().html(e.error_msg);else{var t=e.response.gtm;AoPS.bd.products=t,t[0]&&(AoPS.bd.value=t[0].price),AoPS.bd.fireAnalytics=["add_to_cart"],AoPS.StoreDatalayer&&AoPS.StoreDatalayer.init(),window.location.href="/store/checkout"}}))}))},showTemplate:function(e,t){$(".enroll-main").empty();var o=Handlebars.compile($$(e).innerHTML)(t);$(".enroll-main").append(o),setTimeout((function(){$(window).trigger("resize")}),5)},getExistingLoginIds:function(){var e,t;return AoPS.bd.childrenData?e=AoPS.bd.childrenData.map((function(e){return{username:e.displayed_username,displayName:e.display_name}})):AoPS.bd.platform_user_info&&(t=AoPS.bd.platform_user_info.username||AoPS.bd.platform_user_info.email),{enrollNameData:e,selfLoginId:t}},setupUsernameSelection:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],o=arguments.length>1?arguments[1]:void 0,n=$('input[name="existing-username"]:checked').val(),r=$("input.username");n||(t.concat([o]).includes(this.enrollState.username)?($('input[name="existing-username"]').filter('[value="'+this.enrollState.username+'"]').prop("checked",!0),r.prop("disabled","disabled")):this.enrollState.username?($('input[name="existing-username"]').filter('[value="other"]').prop("checked",!0),r.val(this.enrollState.username)):($('input[name="existing-username"]').first().prop("checked",!0),r.prop("disabled",!0))),$('input[name="existing-username"]').on("click",(function(){"other"===$('input[name="existing-username"]:checked').val()?(r.prop("disabled",!1),r.focus()):r.prop("disabled",!0),e.hideError()})),$(".existing-student-option.custom").on("click",(function(){$('input[name="existing-username"]').filter('[value="other"]').prop("checked",!0),r.prop("disabled",!1),r.focus()}))},getSelectedUserData:function(){var e,t,o=$('input[name="existing-username"]:checked');return o&&"other"===o.val()||!o.length?e=$("input.username").val():o&&(e=o.val()),AoPS.bd.childrenData?AoPS.bd.childrenData.forEach((function(o){o.displayed_username===e&&(t=o.platform_user_id)})):!AoPS.bd.platform_user_info||AoPS.bd.platform_user_info.email!==e&&AoPS.bd.platform_user_info.username!==e||(t=AoPS.bd.platform_user_info.platform_user_id),{username:e,existingStudentPlatformID:t}},getSelectedBookOption:function(){var e=$("input[name=enroll-with]:checked").val();return this.enrollState.bookOption=e,e},showError:function(e,t){if(t){var o=t.find(".form-error");o.length||(o=$('<div class="form-error"></div>').insertAfter(t.find(".form-label"))),o.html(e).show()}else $(".modal-error").text(e),$(".modal-error").css({visibility:"visible"})},hideError:function(e){e?e.find(".form-error").hide():($(".modal-error").text(""),$(".modal-error").css({visibility:"hidden"}))}};
;//# sourceMappingURL=aops_core.js.map